<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Dashboard | CoastCrave Seafood</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Open+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* All previous CSS remains the same */
        /* Apply fonts to all elements */
        body, button, input, select, textarea {
            font-family: 'Open Sans', sans-serif;
        }
        
        h1, h2, h3, h4, h5, h6, .font-bold, .font-semibold, .sidebar-menu {
            font-family: 'Poppins', sans-serif;
        }
        /* =============================================
   FOOTER FIX FOR ALL SCREEN SIZES
   ============================================= */

/* Ensure proper body and footer layout */
html, body {
    height: 100%;
}

body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

.dashboard-container {
    flex: 1 0 auto;
    min-height: calc(100vh - 140px);
}

footer {
    flex-shrink: 0;
    margin-top: auto;
}

.order-history-filters {
    display: flex !important;
    flex-wrap: wrap !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 0.5rem !important;
    margin-bottom: 1.5rem !important;
    padding: 0 0.5rem !important;
    width: 100% !important;
}

/* Add to your existing CSS */
#backToCartBtn {
    transition: all 0.3s ease;
}

#backToCartBtn:hover {
    transform: translateX(-2px);
    box-shadow: 0 0 10px rgba(0, 180, 216, 0.3);
}

/* =============================================
   COMPACT FEEDBACK SECTION STYLES
   ============================================= */

/* Compact feedback form containers */
.feedback-form-container.compact {
    background: linear-gradient(145deg, #0f172a, #1e293b);
    border-radius: 8px;
    padding: 1rem;
    border: 1px solid #334155;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    transition: all 0.2s ease;
}

.feedback-form-container.compact:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 180, 216, 0.15);
    border-color: #00b4d8;
}

/* Compact header */
.feedback-header-compact {
    margin-bottom: 0.75rem;
}

.feedback-header-compact h2 {
    font-size: 1rem;
    display: flex;
    align-items: center;
}

/* Compact form controls */
.form-control.compact {
    padding: 8px 10px;
    font-size: 0.85rem;
    border-radius: 4px;
}

/* Compact star ratings */
.star-rating.compact {
    gap: 2px;
}

.star-rating.compact .star {
    font-size: 0.9rem;
}

/* Compact feedback cards */
.feedback-card.compact {
    background: linear-gradient(145deg, #0f172a, #1e293b);
    border-radius: 6px;
    padding: 0.75rem;
    margin-bottom: 0.75rem;
    border: 1px solid #334155;
    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.2s ease;
}

.feedback-card.compact:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(0, 180, 216, 0.1);
    border-color: #00b4d8;
}

.feedback-header.compact {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 0.5rem;
}

.feedback-user.compact {
    display: flex;
    align-items: center;
    gap: 8px;
}

.user-avatar.compact {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: linear-gradient(135deg, #00b4d8, #1d4e89);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: white;
    font-size: 0.7rem;
}

.feedback-date.compact {
    color: #94a3b8;
    font-size: 0.7rem;
}

.feedback-rating.compact {
    display: flex;
    gap: 2px;
    margin-bottom: 0.5rem;
}

.feedback-content.compact {
    color: #cbd5e1;
    line-height: 1.4;
    font-size: 0.8rem;
    margin-bottom: 0.5rem;
}

.feedback-actions.compact {
    display: flex;
    gap: 8px;
    margin-top: 0.5rem;
}

.feedback-action-btn.compact {
    background: transparent;
    border: none;
    color: #94a3b8;
    cursor: pointer;
    font-size: 0.7rem;
    display: flex;
    align-items: center;
    gap: 3px;
    transition: color 0.3s;
    padding: 2px 4px;
    border-radius: 3px;
}

.feedback-action-btn.compact:hover {
    color: #00b4d8;
    background: rgba(0, 180, 216, 0.1);
}

.no-feedback.compact {
    text-align: center;
    padding: 1.5rem;
    color: #94a3b8;
    font-size: 0.9rem;
}

/* Mobile responsiveness for compact feedback */
@media (max-width: 768px) {
    .feedback-form-container.compact {
        padding: 0.75rem;
    }
    
    .feedback-header-compact h2 {
        font-size: 0.9rem;
    }
    
    .form-control.compact {
        padding: 6px 8px;
        font-size: 0.8rem;
    }
    
    .feedback-card.compact {
        padding: 0.6rem;
    }
}

#cart-section {
    max-width: 800px;
    margin: 0 auto;
}

.cart-container {
    background: rgba(29, 78, 137, 0.2);
    border-radius: 12px;
    border: 1px solid #1d4e89;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
}

/* Free Delivery Banner */
.free-delivery-banner {
    background: linear-gradient(135deg, #10b981, #059669);
    border-radius: 8px;
    padding: 0.75rem 1rem;
    margin-bottom: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    border: 1px solid rgba(16, 185, 129, 0.5);
}

.free-delivery-text {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    color: white;
    font-weight: 600;
    font-size: 0.9rem;
}

.free-delivery-icon {
    font-size: 1.1rem;
}

.free-delivery-amount {
    background: rgba(255, 255, 255, 0.2);
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 700;
}

/* Progress Bar for Free Delivery */
.delivery-progress-container {
    margin-bottom: 1.25rem;
}

.delivery-progress-text {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
    font-size: 0.85rem;
    color: #cbd5e1;
}

.delivery-progress-bar {
    height: 8px;
    background: #334155;
    border-radius: 4px;
    overflow: hidden;
}

.delivery-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #10b981, #34d399);
    border-radius: 4px;
    transition: width 0.5s ease;
    position: relative;
}

.delivery-progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 10px;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4));
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% { opacity: 0.3; }
    50% { opacity: 0.7; }
    100% { opacity: 0.3; }
}

/* Compact Cart Items */
.cart-items-container {
    max-height: 400px;
    overflow-y: auto;
    margin-bottom: 1.25rem;
    padding-right: 0.5rem;
}

.cart-items-container::-webkit-scrollbar {
    width: 6px;
}

.cart-items-container::-webkit-scrollbar-thumb {
    background: #1d4e89;
    border-radius: 3px;
}

.cart-item {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 0.75rem;
    padding: 1rem 0;
    border-bottom: 1px solid #334155;
    align-items: center;
}

.cart-item:last-child {
    border-bottom: none;
}

.cart-item-image {
    width: 60px;
    height: 60px;
    border-radius: 8px;
    background-size: cover;
    background-position: center;
    flex-shrink: 0;
}

.cart-item-details {
    min-width: 0; /* Prevents text overflow issues */
}

.cart-item-name {
    font-weight: 600;
    color: #90e0ef;
    font-size: 0.95rem;
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.cart-item-price {
    color: #cbd5e1;
    font-size: 0.85rem;
}

.cart-item-controls {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    justify-self: end;
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.quantity-btn {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: #1d4e89;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background 0.3s;
    font-size: 0.8rem;
}

.quantity-btn:hover {
    background: #00b4d8;
}

.quantity-display {
    min-width: 30px;
    text-align: center;
    font-weight: 600;
    font-size: 0.9rem;
}

.cart-item-total {
    font-weight: 700;
    color: #90e0ef;
    font-size: 0.95rem;
    min-width: 70px;
    text-align: right;
}

.remove-item {
    color: #ef4444;
    background: none;
    border: none;
    cursor: pointer;
    font-size: 0.9rem;
    padding: 0.25rem;
    transition: color 0.3s;
}

.remove-item:hover {
    color: #dc2626;
}

/* Compact Order Summary */
.order-summary {
    background: rgba(29, 78, 137, 0.3);
    border-radius: 8px;
    padding: 1.25rem;
    margin-bottom: 1.25rem;
    border: 1px solid #1d4e89;
}

.order-summary-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.75rem;
    font-size: 0.9rem;
}

.order-summary-label {
    color: #cbd5e1;
}

.order-summary-value {
    color: #90e0ef;
    font-weight: 600;
}

.order-summary-total {
    border-top: 1px solid #334155;
    padding-top: 0.75rem;
    margin-top: 0.75rem;
    font-size: 1.1rem;
    font-weight: 700;
    color: #00b4d8;
}

.free-delivery-applied {
    color: #10b981;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}

/* Empty Cart State */
.empty-cart {
    text-align: center;
    padding: 2rem 1rem;
    color: #94a3b8;
}

.empty-cart-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: #475569;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .cart-container {
        padding: 1rem;
    }
    
    .cart-item {
        grid-template-columns: auto 1fr;
        gap: 0.5rem;
    }
    
    .cart-item-controls {
        grid-column: 1 / -1;
        justify-content: space-between;
        margin-top: 0.5rem;
    }
    
    .free-delivery-banner {
        flex-direction: column;
        gap: 0.5rem;
        text-align: center;
    }
    
    .free-delivery-text {
        justify-content: center;
    }
}


/* =============================================
   ORDER HISTORY SECTION FIXES
   ============================================= */

#order-history-section {
    min-height: calc(100vh - 200px);
    padding-bottom: 2rem;
    position: relative;
}

#orderHistory {
    max-height: calc(100vh - 350px);
    overflow-y: auto;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
}

/* Ensure the order cards have proper spacing */
.order-card {
    margin-bottom: 1rem;
    padding: 1.5rem;
}

/* Fix for the filter buttons container */
.flex.flex-wrap.justify-center.gap-4 {
    margin-bottom: 2rem;
    padding: 0 1rem;
}

/* Fix for when there are no orders */
#orderHistory .text-center {
    padding: 3rem 0;
    min-height: 200px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}
/* =============================================
   MOBILE STYLES
   ============================================= */

@media (max-width: 1024px) {
    #order-history-section {
        min-height: calc(100vh - 180px);
        padding-bottom: 1.5rem;
    }
    
    #orderHistory {
        max-height: calc(100vh - 320px);
        margin-bottom: 1rem;
    }
}

@media (max-width: 768px) {
    .dashboard-container {
        min-height: calc(100vh - 120px);
    }
    
    #order-history-section {
        min-height: calc(100vh - 160px);
        padding-bottom: 1rem;
    }
    
    #orderHistory {
        max-height: calc(100vh - 280px);
        margin-bottom: 0.5rem;
        padding-bottom: 0.5rem;
    }
    
    .order-card {
        margin-bottom: 0.75rem;
        padding: 1rem;
    }
    
    .flex.flex-wrap.justify-center.gap-4 {
        margin-bottom: 1.5rem;
        padding: 0 0.5rem;
    }
    
    #orderHistory .text-center {
        padding: 2rem 0;
        min-height: 150px;
    }
}

@media (max-width: 480px) {
    .dashboard-container {
        min-height: calc(100vh - 110px);
    }
    
    #order-history-section {
        min-height: calc(100vh - 140px);
        padding-bottom: 0.5rem;
    }
    
    #orderHistory {
        max-height: calc(100vh - 250px);
        margin-bottom: 0.25rem;
    }
    
    .order-card {
        margin-bottom: 0.5rem;
        padding: 0.75rem;
    }
    
    /* Stack the filter buttons vertically on very small screens */
    .flex.flex-wrap.justify-center.gap-4 {
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }
    
    .filter-order-btn {
        width: 90%;
        text-align: center;
    }
    
    #orderHistory .text-center {
        padding: 1.5rem 0;
        min-height: 120px;
    }
}

/* =============================================
   SCROLLBAR STYLING
   ============================================= */

#orderHistory::-webkit-scrollbar,
#orderTrackingDetails::-webkit-scrollbar {
    width: 6px;
}

#orderHistory::-webkit-scrollbar-track,
#orderTrackingDetails::-webkit-scrollbar-track {
    background: #0a1128;
    border-radius: 3px;
}

#orderHistory::-webkit-scrollbar-thumb,
#orderTrackingDetails::-webkit-scrollbar-thumb {
    background: #1d4e89;
    border-radius: 3px;
}

#orderHistory::-webkit-scrollbar-thumb:hover,
#orderTrackingDetails::-webkit-scrollbar-thumb:hover {
    background: #00b4d8;
}

/* Firefox scrollbar */
#orderHistory,
#orderTrackingDetails {
    scrollbar-width: thin;
    scrollbar-color: #1d4e89 #0a1128;
}


/* =============================================
   ENSURE OTHER SECTIONS AREN'T AFFECTED
   ============================================= */

/* Make sure other sections maintain their layout */
.dashboard-section:not(#order-history-section):not(#track-order-section) {
    min-height: auto;
}

.dashboard-section:not(#order-history-section):not(#track-order-section) .bg-blue-900 {
    min-height: auto;
}


/* Ensure the footer styling remains consistent */
/* =============================================
   FOOTER STYLING - FIXED SIZE AND POSITIONING
   ============================================= */

footer {
    padding: 1rem 0 !important;
    min-height: 50px !important;
    display: flex;
    align-items: center;
    margin-top: 2rem;
    position: relative;
    z-index: 10;
}

footer .container {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
}

footer .border-t {
    margin-top: 0 !important;
    padding-top: 0 !important;
    border: none !important;
}

/* Remove all extra spacing and borders */
footer .border-t.border-gray-700 {
    border: none !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Make footer text match header text size */
footer p {
    font-size: 0.9rem !important;
    margin-bottom: 0 !important;
    padding: 0 !important;
}

/* Match header's border styling */
footer.border-t {
    border-top: 1px solid #1e40af !important;
}

/* Exact header matching */
footer.bg-gray-900 {
    height: 40px !important;
    display: flex;
    align-items: center;
}

/* Add padding to all dashboard sections to prevent footer overlap */
.dashboard-section {
    padding-bottom: 2rem;
}

/* Mobile responsiveness - match header exactly */
@media (max-width: 768px) {
    footer {
        padding: 0.75rem 0 !important;
        min-height: 50px !important;
    }
    
    footer.bg-gray-900 {
        height: 45px !important;
    }
    
    .dashboard-section {
        padding-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    footer {
        padding: 0.5rem 0 !important;
        min-height: 45px !important;
    }
    
    footer.bg-gray-900 {
        height: 45px !important;
    }
    
    footer p {
        font-size: 0.8rem !important;
    }
    
    .dashboard-section {
        padding-bottom: 1rem;
    }
}

/* =============================================
   ADDITIONAL SAFEGUARDS
   ============================================= */

/* Prevent content from being hidden behind footer */
.dashboard-content {
    position: relative;
    z-index: 1;
}

/* Ensure proper spacing for all dashboard sections */
.dashboard-section {
    padding-bottom: 2rem;
}

@media (max-width: 768px) {
    .dashboard-section {
        padding-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    .dashboard-section {
        padding-bottom: 1rem;
    }
}
@media (max-width: 768px) {
    .dashboard-section {
        padding-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    .dashboard-section {
        padding-bottom: 1rem;
    }
}
        /* Track Order Section Specific Fixes */
#track-order-section {
    min-height: calc(100vh - 200px);
    padding-bottom: 2rem;
    position: relative;
}

#orderTrackingDetails {
    max-height: 70vh;
    overflow-y: auto;
    margin-bottom: 2rem;
    scroll-behavior: smooth;
}

/* Ensure the tracking container has proper spacing */
#orderTrackingDetails .text-center {
    padding: 2rem 0;
    min-height: 200px;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* Fix for tracking progress layout */
.tracking-progress {
    margin: 2rem 0;
    padding: 0 1rem;
}

/* Timeline layout improvements */
#orderTrackingDetails > div:last-child {
    margin-bottom: 0;
}

/* Progress bar container improvements */
.tracking-progress-container {
    background: rgba(29, 78, 137, 0.2);
    border-radius: 12px;
    padding: 1.5rem;
    margin: 1.5rem 0;
    border: 1px solid #1d4e89;
}

/* Ensure the search container doesn't push content */
.track-order-search {
    margin-bottom: 1.5rem;
    position: relative;
    z-index: 1;
}

/* =============================================
   MOBILE STYLES
   ============================================= */

@media (max-width: 1024px) {
    #order-history-section {
        min-height: calc(100vh - 180px);
        padding-bottom: 1.5rem;
    }
    
    #orderHistory {
        max-height: calc(100vh - 320px);
        margin-bottom: 1rem;
    }
    
    #track-order-section {
        min-height: calc(100vh - 180px);
        padding-bottom: 1.5rem;
    }
    
    #orderTrackingDetails {
        max-height: 60vh;
        margin-bottom: 1.5rem;
    }
}

@media (max-width: 768px) {
    .dashboard-container {
        min-height: calc(100vh - 120px);
    }
    
    #order-history-section {
        min-height: calc(100vh - 160px);
        padding-bottom: 1rem;
    }
    
    #orderHistory {
        max-height: calc(100vh - 280px);
        margin-bottom: 0.5rem;
        padding-bottom: 0.5rem;
    }
    
    .order-card {
        margin-bottom: 0.75rem;
        padding: 1rem;
    }
    
    .flex.flex-wrap.justify-center.gap-4 {
        margin-bottom: 1.5rem;
        padding: 0 0.5rem;
    }
    
    #orderHistory .text-center {
        padding: 2rem 0;
        min-height: 150px;
    }
    
    #track-order-section {
        min-height: calc(100vh - 160px);
        padding-bottom: 1rem;
    }
    
    #orderTrackingDetails {
        max-height: 55vh;
        margin-bottom: 1rem;
    }
    
    .tracking-progress {
        margin: 1.5rem 0;
        padding: 0 0.5rem;
    }
    
    /* Stack the grid layout on mobile */
    #orderTrackingDetails .grid.grid-cols-1.md\:grid-cols-2 {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    #orderTrackingDetails .text-center {
        padding: 1.5rem 0;
        min-height: 150px;
    }
}

@media (max-width: 480px) {
    .dashboard-container {
        min-height: calc(100vh - 110px);
    }
    
    #order-history-section {
        min-height: calc(100vh - 140px);
        padding-bottom: 0.5rem;
    }
    
    #orderHistory {
        max-height: calc(100vh - 250px);
        margin-bottom: 0.25rem;
    }
    
    .order-card {
        margin-bottom: 0.5rem;
        padding: 0.75rem;
    }
    
    /* Stack the filter buttons vertically on very small screens */
    .flex.flex-wrap.justify-center.gap-4 {
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
    }
    
    .filter-order-btn {
        width: 90%;
        text-align: center;
    }
    
    #orderHistory .text-center {
        padding: 1.5rem 0;
        min-height: 120px;
    }
    
    #track-order-section {
        min-height: calc(100vh - 140px);
        padding-bottom: 0.5rem;
    }
    
    #orderTrackingDetails {
        max-height: 50vh;
        margin-bottom: 1rem;
    }
    
    .tracking-progress {
        margin: 1rem 0;
        flex-wrap: wrap;
        gap: 0.5rem;
    }
    
    .tracking-step {
        min-width: 60px;
    }
    
    .tracking-step-label {
        font-size: 0.7rem;
    }
    
    #orderTrackingDetails .text-center {
        padding: 1rem 0;
        min-height: 120px;
    }
}

/* Ensure proper body and footer layout */
html, body {
    height: 100%;
}

body {
    display: flex;
    flex-direction: column;
}

.dashboard-container {
    flex: 1 0 auto;
}

footer {
    flex-shrink: 0;
}

/* Fix for order details grid layout */
#orderTrackingDetails .grid.grid-cols-1.md\:grid-cols-2 {
    gap: 2rem;
}

/* Add scrollbar styling for better UX */
#orderTrackingDetails::-webkit-scrollbar {
    width: 6px;
}

#orderTrackingDetails::-webkit-scrollbar-track {
    background: #0a1128;
    border-radius: 3px;
}

#orderTrackingDetails::-webkit-scrollbar-thumb {
    background: #1d4e89;
    border-radius: 3px;
}

#orderTrackingDetails::-webkit-scrollbar-thumb:hover {
    background: #00b4d8;
}

/* Ensure timeline items have proper spacing */
#orderTrackingDetails .space-y-3.md\:space-y-4 > * + * {
    margin-top: 1rem;
}

@media (max-width: 768px) {
    #orderTrackingDetails .space-y-3.md\:space-y-4 > * + * {
        margin-top: 0.75rem;
    }
}


/* Fix for the order header section */
#orderTrackingDetails > div:first-child {
    margin-bottom: 1.5rem;
}

/* Ensure delivery information section doesn't overflow */
#orderTrackingDetails .space-y-2 > * + * {
    margin-top: 0.5rem;
}
        /* Add the new CSS for the image gallery */
        /* Image Gallery Styles - Responsive for All Devices */
        .image-gallery {
            display: flex;
            gap: 1.5rem;
            padding: 1.5rem 0;
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: #1d4e89 #0a1128;
            min-width: 100%;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
        }

        .image-gallery::-webkit-scrollbar {
            height: 10px;
        }

        .image-gallery::-webkit-scrollbar-track {
            background: #0a1128;
            border-radius: 4px;
        }

        .image-gallery::-webkit-scrollbar-thumb {
            background: #1d4e89;
            border-radius: 4px;
        }

        .image-gallery::-webkit-scrollbar-thumb:hover {
            background: #00b4d8;
        }

        /* Desktop - Large Images */
        .gallery-item {
            flex: 0 0 auto;
            width: 400px; /* Large width for desktop */
            min-width: 380px; /* Large minimum width */
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
            transition: transform 0.4s ease, box-shadow 0.4s ease;
            scroll-snap-align: start;
            display: flex;
            flex-direction: column;
        }

        .gallery-item:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .gallery-img {
            width: 100%;
            height: 300px; /* Large height for desktop */
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .gallery-item:hover .gallery-img {
            transform: scale(1.05);
        }

        /* UPDATED: Gallery caption now extends full width */
        .gallery-caption {
            padding: 1.2rem;
            background: rgba(29, 78, 137, 0.4);
            color: #caf0f8;
            text-align: center;
            font-size: 1rem;
            font-weight: 500;
            backdrop-filter: blur(5px);
            flex-grow: 1; /* Makes caption take remaining space */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Tablet - Medium Size */
        @media (max-width: 1024px) {
            .gallery-item {
                width: 350px;
                min-width: 320px;
            }
            
            .gallery-img {
                height: 250px;
            }
        }

        /* Mobile - Exact Size */
        @media (max-width: 768px) {
            .image-gallery {
                gap: 1rem;
                padding: 1rem 0;
            }
            
            .gallery-item {
                width: 300px; /* Exact size for mobile */
                min-width: 300px; /* Fixed exact width */
            }
            
            .gallery-img {
                height: 200px; /* Exact height for mobile */
            }
            
            .gallery-caption {
                padding: 1rem;
                font-size: 0.9rem;
            }
        }

        /* Small Mobile - Exact Size */
        @media (max-width: 480px) {
            .image-gallery {
                gap: 0.8rem;
                padding: 0.8rem 0;
            }
            
            .gallery-item {
                width: 280px; /* Exact size for small mobile */
                min-width: 280px; /* Fixed exact width */
            }
            
            .gallery-img {
                height: 180px; /* Exact height for small mobile */
            }
            
            .gallery-caption {
                padding: 0.8rem;
                font-size: 0.85rem;
            }
        }

        /* Scroll hint animation */
        .scroll-hint {
            text-align: center;
            color: #90e0ef;
            margin-bottom: 0.5rem;
            animation: bounce 2s infinite;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateX(0);
            }
            40% {
                transform: translateX(10px);
            }
            60% {
                transform: translateX(5px);
            }
        }
        
        /* Fade in animation for section titles */
        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #logoutNotification .notification-icon {
    color: #ef4444;
}

#logoutNotification .notification-title {
    color: #ef4444;
}
/* Add this to your existing CSS */
.menu-title h3 {
    font-size: 1rem !important; /* Smaller product title */
}

.add-to-cart {
    font-size: 0.85rem !important; /* Smaller button text */
    padding: 8px 12px !important; /* Adjust padding to match smaller text */
}

.menu-price {
    font-size: 0.9rem !important; /* Optional: make price slightly smaller too */
}

/* For mobile responsiveness */
@media (max-width: 768px) {
    .menu-title h3 {
        font-size: 0.9rem !important; /* Even smaller on mobile */
    }
    
    .add-to-cart {
        font-size: 0.8rem !important;
        padding: 6px 10px !important;
    }
}
        
        /* UPDATED: Centered Notification Styles */
        .notification-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            max-width: 90%;
            width: 400px;
        }

        .notification-container.show {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .notification {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            border: 1px solid #334155;
        }

        .notification-header {
            display: flex;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #334155;
        }

        .notification-icon {
            font-size: 1.5rem;
            margin-right: 12px;
            flex-shrink: 0;
        }

        .notification-title {
            font-weight: bold;
            font-size: 1.1rem;
            color: #f8fafc;
        }

        .notification-body {
            padding: 20px;
        }

        .notification-message {
            margin-bottom: 16px;
            color: #cbd5e1;
            line-height: 1.5;
        }

        .notification-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .notification-btn {
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            border: none;
        }

        .notification-btn-primary {
            background: #00b4d8;
            color: #0f172a;
        }

        .notification-btn-primary:hover {
            background: #0096c7;
        }

        .notification-btn-secondary {
            background: transparent;
            color: #00b4d8;
            border: 1px solid #00b4d8;
        }

        .notification-btn-secondary:hover {
            background: rgba(0, 180, 216, 0.1);
        }

        .notification-close {
            position: absolute;
            top: 12px;
            right: 12px;
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .notification-close:hover {
            color: #f8fafc;
        }
        
        /* All previous CSS remains the same */
        
        /* Enhanced Menu item badge styles - Seafood Themed Colors */
        .menu-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            padding: 8px 12px;
            border-radius: 16px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 10;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
            min-width: 100px;
            text-align: center;
        }

        .top-pick-badge {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.95), rgba(255, 82, 82, 0.95));
            color: white;
            border-color: rgba(255, 107, 107, 0.9);
            box-shadow: 0 3px 10px rgba(255, 107, 107, 0.3);
        }

        .fresh-badge {
            background: linear-gradient(135deg, rgba(0, 180, 216, 0.95), rgba(144, 224, 239, 0.95));
            color: white;
            border-color: rgba(0, 180, 216, 0.9);
            box-shadow: 0 3px 10px rgba(0, 180, 216, 0.3);
        }
        
        /* Menu image container */
        .menu-img-container {
            position: relative;
        }
        
        /* Centered titles for all sections */
        .section-title {
            text-align: center;
            position: relative;
            margin-bottom: 2rem;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: var(--sea-teal);
            border-radius: 2px;
        }
        
        /* Search bar styles */
        .search-container {
            position: relative;
            max-width: 500px;
            margin: 0 auto 2rem;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 20px 12px 45px;
            background: rgba(29, 78, 137, 0.3);
            border: 1px solid #1d4e89;
            border-radius: 30px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #00b4d8;
            box-shadow: 0 0 10px rgba(0, 180, 216, 0.3);
        }
        
        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #90e0ef;
        }
        
        /* Enhanced feedback section styles */
        .feedback-card {
            background: linear-gradient(145deg, #0f172a, #1e293b);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #334155;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .feedback-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 180, 216, 0.2);
            border-color: #00b4d8;
        }
        
        .feedback-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }
        
        .feedback-user {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00b4d8, #1d4e89);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .feedback-date {
            color: #94a3b8;
            font-size: 0.875rem;
        }
        
        .feedback-rating {
            display: flex;
            gap: 5px;
            margin-bottom: 1rem;
        }
        
        .feedback-content {
            color: #cbd5e1;
            line-height: 1.6;
        }
        
        .feedback-actions {
            display: flex;
            gap: 10px;
            margin-top: 1rem;
        }
        
        .feedback-action-btn {
            background: transparent;
            border: none;
            color: #94a3b8;
            cursor: pointer;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: color 0.3s;
        }
        
        .feedback-action-btn:hover {
            color: #00b4d8;
        }
        
        .feedback-form-container {
            background: linear-gradient(145deg, #0f172a, #1e293b);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid #334155;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 2rem;
        }
        
        .feedback-form-title {
            text-align: center;
            margin-bottom: 1.5rem;
            color: #00b4d8;
            font-size: 1.25rem;
            font-weight: 600;
        }
        
        .no-feedback {
            text-align: center;
            padding: 2rem;
            color: #94a3b8;
        }
        
        /* All previous CSS remains unchanged */
        :root {
            --deep-ocean: #0a1128;
            --ocean-blue: #1d4e89;
            --sea-teal: #00b4d8;
            --seafoam: #90e0ef;
            --coral: #ff6b6b;
            --gold: #ffd166;
            --sand: #f4e9cd;
            --light: #caf0f8;
            --dark: #03071e;
        }

        .wave {
            background: url('data:image/svg+xml;utf8,<svg viewBox="0 0 1200 120" xmlns="http://www.w3.org/2000/svg" fill="%230a1128"><path d="M0 0v46.29c47.79 22.2 103.59 32.17 158 28 70.36-5.37 136.33-33.31 206.8-37.5 73.84-4.36 147.54 16.88 218.2 35.26 69.27 18 138.3 24.88 209.4 13.08 36.15-6 69.85-17.84 104.45-29.34C989.49 25 1113-14.29 1200 52.47V0z" opacity=".25"/><path d="M0 0v15.81c13 21.11 27.64 41.05 47.69 56.24C99.41 111.27 165 111 224.58 91.58c31.15-10.15 60.09-26.07 89.67-39.8 40.92-19 84.73-46 130.83-49.67 36.26-2.85 70.9 9.42 98.6 31.56 31.77 25.39 62.32 62 103.63 73 40.44 10.79 81.35-6.69 119.13-24.28s75.16-39 116.92-43.05c59.73-5.85 113.28 22.88 168.9 38.84 30.2 8.66 59 6.17 87.09-7.5 22.43-10.89 48-26.93 60.65-49.24V0z" opacity=".5"/><path d="M0 0v5.63C149.93 59 314.09 71.32 475.83 42.57c43-7.64 84.23-20.12 127.61-26.46 59-8.63 112.48 12.24 165.56 35.4C827.93 77.22 886 95.24 951.2 90c86.53-7 172.46-45.71 248.8-84.81V0z"/></svg>');
            position: absolute;
            bottom: 0;
            left: 0;
            width: 200%;
            height: 100%;
            background-repeat: repeat no-repeat;
            background-position: 0 bottom;
            transform-origin: center bottom;
            animation: wave 12s linear infinite;
        }

        .wave:nth-of-type(2) {
            bottom: -5px;
            animation: wave 18s linear infinite;
            opacity: 0.5;
            animation-direction: reverse;
        }

        .wave:nth-of-type(3) {
            bottom: -10px;
            animation: wave 20s linear infinite;
            opacity: 0.7;
        }

        @keyframes wave {
            0% {
                transform: translateX(0);
            }
            50% {
                transform: translateX(-25%);
            }
            100% {
                transform: translateX(-50%);
            }
        }

        .nav-links a:after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--sea-teal);
            transition: width 0.3s ease;
        }

        .nav-links a:hover:after {
            width: 100%;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--sea-teal);
        }

        .menu-item:hover {
            transform: translateY(-10px);
            border-color: var(--sea-teal);
        }
        
        /* Dropdown styles - UPDATED FOR MOBILE COMPATIBILITY */
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            background-color: #1e293b;
            min-width: 180px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 100;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #334155;
        }
        
        .dropdown-content a, .dropdown-content .user-info {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            transition: background-color 0.3s;
        }

        .dropdown-content .user-info {
            background-color: #334155;
            border-bottom: 1px solid #475569;
            cursor: default;
        }
        
        .dropdown-content .user-info:hover {
            background-color: #334155;
        }
        
        .dropdown-content a:hover {
            background-color: #334155;
        }
        
        /* UPDATED: Dropdown toggle for mobile */
        .dropdown.active .dropdown-content {
            display: block;
        }
        
        .dropdown-btn {
            background-color: transparent;
            border: 2px solid #22d3ee;
            color: #22d3ee;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .dropdown-btn:hover {
            background-color: #22d3ee;
            color: #0f172a;
        }
        
        .user-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        /* Enhanced Form Styles */
        .form-control {
            width: 100%;
            padding: 10px 12px;
            background: rgba(29, 78, 137, 0.3);
            border: 1px solid #1d4e89;
            border-radius: 5px;
            color: white;
            font-size: 0.9rem;
            transition: border 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #00b4d8;
        }
        

        /* Modal Styles - UPDATED TO BE SMALLER */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #0a1128;
            padding: 1.5rem;
            border-radius: 10px;
            width: 90%;
            max-width: 450px; /* Reduced from 500px */
            max-height: 85vh; /* Added max-height */
            overflow-y: auto; /* Added scroll for overflow */
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid #1d4e89;
        }

        .close-modal {
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 1.3rem;
            color: #caf0f8;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #ff6b6b;
        }

        .modal h2 {
            text-align: center;
            margin-bottom: 1rem;
            color: #00b4d8;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.4rem;
            color: #90e0ef;
            font-size: 0.9rem;
        }

        .form-footer {
            text-align: center;
            margin-top: 1rem;
        }

        .form-footer a {
            color: #00b4d8;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .form-footer a:hover {
            color: #90e0ef;
        }
        
        /* Cart Styles */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #334155;
        }
        
        .cart-item:last-child {
            border-bottom: none;
        }
        
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .quantity-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #1d4e89;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .quantity-btn:hover {
            background: #00b4d8;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #0a1128;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #1d4e89;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #00b4d8;
        }
        
        /* Dashboard specific styles */
        .dashboard-container {
            display: flex;
            min-height: calc(100vh - 80px);
            margin-top: 80px;
        }
        
        .dashboard-sidebar {
            width: 250px;
            background: #0f172a;
            padding: 2rem 1rem;
            border-right: 1px solid #1e293b;
            transition: transform 0.3s ease;
            z-index: 100;
        }
        
        .dashboard-content {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            transition: margin-left 0.3s ease;
        }
        
        .dashboard-section {
            display: none;
        }
        
        .dashboard-section.active {
            display: block;
        }
        
        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
            font-family: 'Poppins', sans-serif; /* ADDED: Ensure Poppins font for sidebar */
        }
        
        .sidebar-menu li {
            margin-bottom: 0.5rem;
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            color: #cbd5e1;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s;
            position: relative;
            font-family: 'Poppins', sans-serif; /* ADDED: Ensure Poppins font for sidebar links */
        }
        
        .sidebar-menu a:hover, .sidebar-menu a.active {
            background: #1e293b;
            color: #22d3ee;
        }
        
        .sidebar-menu a.active {
            background: linear-gradient(90deg, rgba(34, 211, 238, 0.2) 0%, rgba(34, 211, 238, 0.05) 100%);
            border-left: 3px solid #22d3ee;
            box-shadow: 0 0 10px rgba(34, 211, 238, 0.3);
        }
        
        .sidebar-menu a i {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        /* Tooltip styles - FIXED POSITIONING */
        .tooltip {
            position: relative;
        }
        
        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: white;
            padding: 6px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 1000;
            border: 1px solid #334155;
            text-align: center;
            min-width: 70px;
            pointer-events: none;
        }
        
        .tooltip:hover::after {
            opacity: 1;
            visibility: visible;
        }
        
        /* Order tracking styles */
        .tracking-progress {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin: 2rem 0;
        }
        
        .tracking-progress:before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 4px;
            background: #334155;
            z-index: 1;
        }
        
        .tracking-progress-bar {
            position: absolute;
            top: 15px;
            left: 0;
            height: 4px;
            background: #22d3ee;
            z-index: 2;
            transition: width 0.5s ease;
        }
        
        .tracking-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 3;
            position: relative;
        }
        
        .tracking-step-icon {
            width: 34px;
            height: 34px;
            border-radius: 50%;
            background: #334155;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
            transition: all 0.3s;
        }
        
        .tracking-step.active .tracking-step-icon {
            background: #22d3ee;
            color: #0f172a;
        }
        
        .tracking-step.completed .tracking-step-icon {
            background: #10b981;
            color: white;
        }
        
        .tracking-step-label {
            font-size: 0.875rem;
            text-align: center;
        }
        
        /* Order history styles */
        .order-card {
            background: #1e293b;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid #334155;
            transition: all 0.3s;
        }
        
        .order-card:hover {
            border-color: #22d3ee;
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .order-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .status-delivered {
            background: #10b981;
            color: white;
        }
        
        .status-preparing {
            background: #f59e0b;
            color: white;
        }
        
        .status-out-for-delivery {
            background: #3b82f6;
            color: white;
        }
        
        .status-cancelled {
            background: #ef4444;
            color: white;
        }
        
        .status-pending {
            background: #6b7280;
            color: white;
        }
        
        /* Feedback styles */
        .star-rating {
            display: flex;
            gap: 5px;
            margin-bottom: 1rem;
        }
        
        .star {
            color: #6b7280;
            cursor: pointer;
            font-size: 1.5rem;
            transition: color 0.2s;
        }
        
        .star.active {
            color: #fbbf24;
        }
        
        .star:hover {
            color: #fbbf24;
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: #22d3ee;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }
        
        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 99;
        }
        
        /* Logo styles */
        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .logo {
            width: 80px;
            height: 60px;
            object-fit: contain;
        }
        
        .brand-text {
            font-size: 1.5rem;
            font-weight: bold;
            color: #22d3ee;
            font-family: 'Poppins', sans-serif; /* Add this line */
        }
        
        /* Payment Method Styles - UPDATED TO BE MORE COMPACT */
        .payment-method {
            display: none;
            margin-top: 0.8rem;
            padding: 0.8rem;
            background: rgba(29, 78, 137, 0.2);
            border-radius: 6px;
            border: 1px solid #1d4e89;
            font-size: 0.85rem;
        }
        
        .payment-method.active {
            display: block;
        }
        
        .payment-option {
            display: flex;
            align-items: center;
            padding: 0.8rem;
            border: 1px solid #334155;
            border-radius: 6px;
            margin-bottom: 0.8rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .payment-option:hover {
            border-color: #00b4d8;
        }
        
        .payment-option.selected {
            border-color: #00b4d8;
            background: rgba(0, 180, 216, 0.1);
        }
        
        .payment-icon {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #1e293b;
            border-radius: 6px;
            margin-right: 0.8rem;
            font-size: 1.1rem;
        }
        
        .payment-info {
            flex: 1;
        }
        
        .payment-title {
            font-weight: 600;
            color: #90e0ef;
            font-size: 0.9rem;
        }
        
        .payment-description {
            font-size: 0.8rem;
            color: #94a3b8;
        }
        
        /* NEW: Desktop Navigation Styles - FIXED */
        .desktop-nav {
            display: none;
            align-items: center;
            gap: 1.5rem;
        }
        
        .desktop-nav-item {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: rgba(34, 211, 238, 0.1);
            color: #cbd5e1;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .desktop-nav-item:hover, .desktop-nav-item.active {
            background: #22d3ee;
            color: #0f172a;
        }
        
        /* FIXED: Improved tooltip styles for better centering and positioning */
        .desktop-nav-item::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            background: #1e293b;
            color: white;
            padding: 6px 10px;
            border-radius: 6px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 1000;
            border: 1px solid #334155;
            text-align: center;
            min-width: 70px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            pointer-events: none;
        }
        
        .desktop-nav-item:hover::after {
            opacity: 1;
            visibility: visible;
        }
        
        /* Cart icon visibility control */
        .mobile-cart-icon {
            display: none;
        }
        
        /* Enhanced Responsive styles */
        @media (min-width: 769px) {
            .dashboard-sidebar {
                display: none;
                
            }
            
            .desktop-nav {
                display: flex;
            }
            
            .mobile-menu-toggle {
                display: none;
            }
            
            .dashboard-container {
                margin-top: 100px;
            }
            
            /* Hide mobile cart icon on desktop */
            .mobile-cart-icon {
                display: none;
            }
            
            /* UPDATED: Desktop dropdown behavior */
            .dropdown:hover .dropdown-content {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard-container {
                flex-direction: column;
                margin-top: 70px;
            }
            
            .dashboard-sidebar {
        position: fixed;
        top: 70px;
        left: 0;
        height: calc(100vh - 70px);
        width: 200px; /* Reduced from 280px to 250px */
        transform: translateX(-100%);
        z-index: 100;
    }
            
            .dashboard-sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .dashboard-content {
                min-height: calc(100vh - 180px); /* Account for header and footer */
    padding-bottom: 2rem; /* Extra space at bottom */
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .mobile-overlay.active {
                display: block;
            }
            
            .sidebar-menu {
                display: block;
                padding-bottom: 0;
            }
            
            .sidebar-menu li {
                margin-bottom: 0.5rem;
                margin-right: 0;
            }
            
            .sidebar-menu a {
                white-space: normal;
            }
            
            /* Header adjustments for mobile */
            header .container {
                padding: 0 1rem;
            }
            
            .user-actions {
                gap: 12px;
            }
            
            .dropdown-btn {
                padding: 6px 12px;
                font-size: 0.875rem;
            }
            
            /* Show mobile cart icon on mobile */
            .mobile-cart-icon {
                display: block;
            }
            
            /* Hide desktop nav on mobile */
            .desktop-nav {
                display: none;
            }
            
            /* Stats grid adjustments */
            .grid.grid-cols-1.md\:grid-cols-3 {
                grid-template-columns: repeat(1, 1fr);
                gap: 1rem;
            }
            
            /* Home section layout */
            .grid.grid-cols-1.lg\:grid-cols-2 {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            /* Menu grid adjustments */
            .grid.grid-cols-1.md\:grid-cols-2.lg\:grid-cols-3 {
                grid-template-columns: repeat(1, 1fr);
            }
            
            /* Order tracking progress */
            .tracking-progress {
                flex-wrap: wrap;
                gap: 1rem;
            }
            
            .tracking-step {
                flex: 1;
                min-width: 80px;
            }
            
            .tracking-step-label {
                font-size: 0.75rem;
            }
            
            /* Cart item layout */
            .cart-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .cart-item > div:last-child {
                width: 100%;
                justify-content: space-between;
            }
            
            /* Order header adjustments */
            .order-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .order-header > div:last-child {
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            
            /* Feedback section layout */
            .grid.grid-cols-1.lg\:grid-cols-2 {
                grid-template-columns: 1fr;
            }
            
            /* Quick actions grid */
            .grid.grid-cols-2 {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
            }
            
            /* Modal adjustments */
            .modal-content {
                width: 95%;
                padding: 1.2rem;
                margin: 1rem;
                max-width: 400px;
            }
            
            /* Filter buttons */
            .flex.flex-wrap.justify-center.gap-4 {
                gap: 0.5rem;
            }
            
            .filter-btn, .filter-order-btn {
                padding: 8px 12px;
                font-size: 0.875rem;
            }
        }
        
        @media (max-width: 480px) {
            .dashboard-content {
                padding: 0.75rem;
            }
            
            .grid.grid-cols-2 {
                grid-template-columns: 1fr;
            }
            
            .quick-action {
                padding: 1rem;
            }
            
            .order-card {
                padding: 1rem;
            }
            
            .tracking-step {
                min-width: 60px;
            }
            
            .tracking-step-icon {
                width: 28px;
                height: 28px;
                font-size: 0.875rem;
            }
            
            .tracking-step-label {
                font-size: 0.7rem;
            }
            
            /* Header logo and text */
            .brand-text {
                font-size: 1.25rem;
            }
            
            .logo {
                width: 32px;
                height: 32px;
            }
            
            /* Hide user name on very small screens */
            .dropdown-btn span:not(.fa) {
                display: none;
            }
            
            .user-actions {
                gap: 8px;
            }
            
            /* Modal adjustments for very small screens */
            .modal-content {
                padding: 1rem;
                max-width: 350px;
            }
            
            .payment-option {
                padding: 0.6rem;
            }
            
            .payment-icon {
                width: 32px;
                height: 32px;
                font-size: 1rem;
            }
        }
        
        /* Menu filter styles */
        .filter-btn.active {
            background: #00b4d8;
            color: #0a1128;
        }
        
        .reorder-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .reorder-btn:hover {
            background: #059669;
        }
        
        .track-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .track-btn:hover {
            background: #2563eb;
        }
        
        /* Quick action styles */
        .dashboard-quick-action {
            padding: 1.5rem 1rem;
        }
        
        /* Hover effects for buttons */
        .hover-glow:hover {
            box-shadow: 0 0 15px rgba(34, 211, 238, 0.5);
            transform: scale(1.05);
        }
        
        .hover-zoom:hover {
            transform: scale(1.05);
        }
        
        /* Welcome banner styles */
        .welcome-banner {
            background: linear-gradient(90deg, #1d4e89, #00b4d8);
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
        }
        
        .welcome-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
        }
        
        /* Favorites section styles */
        .favorites-scroll {
            display: flex;
            overflow-x: auto;
            gap: 1rem;
            padding: 1rem 0;
            scrollbar-width: thin;
        }
        
        .favorites-scroll::-webkit-scrollbar {
            height: 6px;
        }
        
        .favorites-scroll::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 3px;
        }
        
        /* Rewards progress bar */
        .rewards-progress {
            height: 20px;
            background: #334155;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .rewards-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #fbbf24, #f59e0b);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        /* Delivery animation */
        .delivery-truck {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% {
                transform: translateX(0);
            }
            50% {
                transform: translateX(10px);
            }
        }
        
       /* Image gallery styles */
        .image-gallery {
            display: flex;
            overflow-x: auto;
            gap: 1rem;
            padding: 1rem 0;
            scrollbar-width: thin;
        }

        .image-gallery::-webkit-scrollbar {
            height: 6px;
        }

        .image-gallery::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 3px;
        }

        .gallery-image {
            min-width: 250px; /* Increased from 200px */
            height: 180px; /* Increased from 150px */
            border-radius: 8px;
            background-size: cover;
            background-position: center;
        }
        
        /* Contact cards */
        .contact-card {
            transition: all 0.3s;
        }
        
        .contact-card:hover {
            transform: translateY(-5px);
            border-color: #22d3ee;
        }
        
        /* Map container */
        .map-container {
            height: 300px;
            border-radius: 8px;
            overflow: hidden;
        }
        
        /* Travel guide styles */
        .travel-guide {
            background: #1e293b;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid #334155;
        }
        
        .travel-guide-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1.5rem;
        }
        
        .travel-guide-icon {
            background: #00b4d8;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            flex-shrink: 0;
        }
        
        .travel-guide-content h4 {
            color: #22d3ee;
            margin-bottom: 0.5rem;
        }
        
        .travel-guide-content p {
            color: #cbd5e1;
            font-size: 0.9rem;
        }
        
        /* Cart icon styles */
        #cartIcon {
            position: relative;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        #cartIcon:hover {
            color: #22d3ee;
            transform: scale(1.1);
        }
        
        /* Ensure content alignment with logo */
        .dashboard-content > section {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* NEW: Receipt Modal Styles */
        .receipt-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            backdrop-filter: blur(5px);
        }

        .receipt-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            color: #333;
            font-family: 'Courier New', monospace;
        }

        .receipt-header {
            text-align: center;
            margin-bottom: 1.5rem;
            border-bottom: 2px dashed #ccc;
            padding-bottom: 1rem;
        }

        .receipt-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1d4e89;
            margin-bottom: 0.5rem;
        }

        .receipt-subtitle {
            font-size: 0.9rem;
            color: #666;
        }

        .receipt-body {
            margin-bottom: 1.5rem;
        }

        .receipt-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .receipt-divider {
            border-bottom: 1px dashed #ccc;
            margin: 1rem 0;
        }

        .receipt-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 1.1rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 2px dashed #ccc;
        }

        .receipt-footer {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.8rem;
            color: #666;
        }

        .receipt-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .receipt-btn {
            flex: 1;
            padding: 0.75rem;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .receipt-print {
            background: #1d4e89;
            color: white;
        }

        .receipt-print:hover {
            background: #0a3d7a;
        }

        .receipt-close {
            background: #e2e8f0;
            color: #333;
        }

        .receipt-close:hover {
            background: #cbd5e1;
        }
        
        /* NEW: Mobile logout button styles - UPDATED TO HIDE ON MOBILE */
        .mobile-logout-btn {
            display: none;
            background: none;
            border: none;
            color: #ef4444;
            font-size: 1.25rem;
            cursor: pointer;
            padding: 0.5rem;
            transition: all 0.3s;
        }
        
        .mobile-logout-btn:hover {
            color: #dc2626;
            transform: scale(1.1);
        }
        
        /* NEW: Hide sidebar logout on mobile */
        @media (max-width: 768px) {
            .sidebar-logout {
                display: none !important;
            }
            
            .mobile-logout-btn {
                display: block;
            }
            
            /* Remove settings from dropdown on mobile */
            .dropdown-content a[href="#"]:nth-child(2) {
                display: none;
            }
            
            /* Show logout in dropdown on mobile */
            .dropdown-content a[href="#"]:last-child {
                display: block;
            }
        }
        
        /* NEW: Delivery fee indicator in cart */
        .delivery-fee-indicator {
            background: rgba(29, 78, 137, 0.3);
            border-radius: 8px;
            padding: 0.75rem;
            margin-bottom: 1rem;
            border: 1px solid #1d4e89;
        }
        
        .delivery-fee-text {
            font-size: 0.9rem;
            color: #cbd5e1;
        }
        
        .delivery-fee-amount {
            font-weight: bold;
            color: #00b4d8;
        }
        
        .location-detection {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 0.25rem;
        }

        
        /* UPDATED: Track Order Search Styles - Match Menu Search */
.track-order-search {
    display: flex;
    align-items: center;
    margin-bottom: 1.5rem;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
    width: 100%;
}

.track-order-search-container {
    position: relative;
    flex: 1;
}

.track-order-search-input {
    width: 100%;
    padding: 0.75rem 1rem 0.75rem 2.5rem;
    background: rgba(29, 78, 137, 0.3);
    border: 1px solid #1d4e89;
    border-radius: 30px;
    color: white;
    font-size: 0.9rem;
    transition: all 0.3s ease;
}

.track-order-search-input:focus {
    outline: none;
    border-color: #00b4d8;
    box-shadow: 0 0 10px rgba(0, 180, 216, 0.3);
}

.track-order-search-icon {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #90e0ef;
    font-size: 0.9rem;
}

.track-order-search-btn {
    background: #00b4d8;
    color: #0f172a;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 30px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    font-size: 0.9rem;
    white-space: nowrap;
    margin-left: 10px;
    height: fit-content;
}

.track-order-search-btn:hover {
    background: #0096c7;
    transform: scale(1.05);
}

/* Mobile responsiveness */
@media (max-width: 480px) {
    .track-order-search {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    .track-order-search-container {
        width: 100%;
    }
    
    .track-order-search-input {
        padding: 0.7rem 1rem 0.7rem 2.5rem;
        font-size: 0.85rem;
    }
    
    .track-order-search-btn {
        padding: 0.7rem 1rem;
        font-size: 0.85rem;
        margin-left: 0;
        width: 100%;
    }
    
    .track-order-search-icon {
        left: 12px;
        font-size: 0.85rem;
    }
}

/* For very small screens */
@media (max-width: 360px) {
    .track-order-search-input {
        padding: 0.6rem 0.8rem 0.6rem 2.2rem;
        font-size: 0.8rem;
    }
    
    .track-order-search-btn {
        padding: 0.6rem 0.8rem;
        font-size: 0.8rem;
    }
    
    .track-order-search-icon {
        left: 10px;
        font-size: 0.8rem;
    }
}
        .track-order-search-btn {
            background: #00b4d8;
            color: #0f172a;
            border: none;
            padding: 0.6rem 1rem;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85rem;
            white-space: nowrap;
        }

        .track-order-search-btn:hover {
            background: #0096c7;
            transform: scale(1.05);
        }

        .track-order-search-container {
            position: relative;
            flex: 1;
        }

        @media (max-width: 480px) {
            .track-order-search {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .track-order-search-btn {
                width: 100%;
            }
        }
        /* Footer - Fixed size and positioning */
footer {
    padding: 1rem 0 !important;
    min-height: 60px !important;
    display: flex;
    align-items: center;
    margin-top: 2rem;
    position: relative;
    z-index: 10;
}

footer .container {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
}

footer .border-t {
    margin-top: 0 !important;
    padding-top: 0 !important;
    border: none !important;
}

/* Remove all extra spacing and borders */
footer .border-t.border-gray-700 {
    border: none !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* Make footer text match header text size */
footer p {
    font-size: 0.9rem !important;
    margin-bottom: 0 !important;
    padding: 0 !important;
}

/* Match header's border styling */
footer.border-t {
    border-top: 1px solid #1e40af !important; /* Same as header's border-blue-800 */
}

/* Exact header matching */
footer.bg-gray-900 {
    height: 60px !important; /* Reduced from 88px */
    display: flex;
    align-items: center;
}

/* Add padding to all dashboard sections to prevent footer overlap */
.dashboard-section {
    padding-bottom: 2rem;
}



/* Mobile responsiveness - match header exactly */
@media (max-width: 768px) {
    footer {
        padding: 0.75rem 0 !important;
        min-height: 50px !important;
    }
    
    footer.bg-gray-900 {
        height: 50px !important;
    }
    
    .dashboard-section {
        padding-bottom: 1.5rem;
    }
}

@media (max-width: 480px) {
    footer {
        padding: 0.5rem 0 !important;
        min-height: 45px !important;
    }
    
    footer.bg-gray-900 {
        height: 45px !important;
    }
    
    footer p {
        font-size: 0.8rem !important;
    }
    
    .dashboard-section {
        padding-bottom: 1rem;
    }
}

/* Checkout Modal Responsive Styles */
#checkoutModal .modal-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #0a1128;
    padding: 2rem;
    border-radius: 10px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
    border: 1px solid #1d4e89;
    max-height: 90vh;
    overflow-y: auto;
}

/* Mobile-specific adjustments for checkout */
@media (max-width: 768px) {
    #checkoutModal .modal-content {
        width: 95%;
        max-width: 95%;
        padding: 1.5rem;
        margin: 0;
    }
    
    #checkoutModal .form-control {
        font-size: 16px; /* Prevents zoom on iOS */
    }
}

@media (max-width: 480px) {
    #checkoutModal .modal-content {
        width: 98%;
        padding: 1rem;
    }
    
    #checkoutModal h2 {
        font-size: 1.5rem;
    }
    
    #checkoutModal .form-group {
        margin-bottom: 1rem;
    }
}
/* Add to your existing CSS */
.notification-container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8);
    z-index: 9999;
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    max-width: 90%;
    width: 400px;
}

.notification-container.show {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1);
}

.notification {
    background: linear-gradient(135deg, #1e293b, #0f172a);
    border-radius: 12px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    border: 1px solid #334155;
}

.notification-header {
    display: flex;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid #334155;
}

.notification-icon {
    font-size: 1.5rem;
    margin-right: 12px;
    flex-shrink: 0;
}

.notification-title {
    font-weight: bold;
    font-size: 1.1rem;
    color: #f8fafc;
}

.notification-body {
    padding: 20px;
}

.notification-message {
    margin-bottom: 16px;
    color: #cbd5e1;
    line-height: 1.5;
}

.notification-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

.notification-btn {
    padding: 8px 16px;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
    border: none;
}

.notification-btn-primary {
    background: #00b4d8;
    color: #0f172a;
}

.notification-btn-primary:hover {
    background: #0096c7;
}

.notification-btn-secondary {
    background: transparent;
    color: #00b4d8;
    border: 1px solid #00b4d8;
}

.notification-btn-secondary:hover {
    background: rgba(0, 180, 216, 0.1);
}

.notification-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: none;
    border: none;
    color: #94a3b8;
    font-size: 1.2rem;
    cursor: pointer;
    transition: color 0.3s ease;
}

.notification-close:hover {
    color: #f8fafc;
}

/* Ensure modal backdrop covers entire screen */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 2000;
    backdrop-filter: blur(5px);
    overflow-y: auto;
}

/* Center all modals consistently */
.modal-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #0a1128;
    padding: 2rem;
    border-radius: 10px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
    border: 1px solid #1d4e89;
}

/* Refresh Status Notification Styles - Matching Logout Design */
#refreshStatusNotification {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.8);
    z-index: 9999;
    opacity: 0;
    visibility: hidden;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    max-width: 90%;
    width: 400px;
}

#refreshStatusNotification.show {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1);
}

#refreshStatusNotification .notification {
    background: linear-gradient(135deg, #1e293b, #0f172a);
    border-radius: 12px;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    border: 1px solid #334155;
}

#refreshStatusNotification .notification-header {
    display: flex;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid #334155;
}

#refreshStatusNotification .notification-icon {
    font-size: 1.5rem;
    margin-right: 12px;
    flex-shrink: 0;
}

#refreshStatusNotification .notification-title {
    font-weight: bold;
    font-size: 1.1rem;
    color: #f8fafc;
}

#refreshStatusNotification .notification-body {
    padding: 20px;
}

#refreshStatusNotification .notification-message {
    margin-bottom: 16px;
    color: #cbd5e1;
    line-height: 1.5;
}

#refreshStatusNotification .notification-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

#refreshStatusNotification .notification-btn {
    padding: 8px 16px;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
    border: none;
}

#refreshStatusNotification .notification-btn-primary {
    background: #00b4d8;
    color: #0f172a;
}

#refreshStatusNotification .notification-btn-primary:hover {
    background: #0096c7;
}

#refreshStatusNotification .notification-close {
    position: absolute;
    top: 12px;
    right: 12px;
    background: none;
    border: none;
    color: #94a3b8;
    font-size: 1.2rem;
    cursor: pointer;
    transition: color 0.3s ease;
}

#refreshStatusNotification .notification-close:hover {
    color: #f8fafc;
}

/* Color variations for different notification types */
#refreshStatusNotification .notification-icon.text-green-500 {
    color: #10b981;
}

#refreshStatusNotification .notification-icon.text-blue-500 {
    color: #3b82f6;
}

#refreshStatusNotification .notification-icon.text-red-500 {
    color: #ef4444;
}

#refreshStatusNotification .notification-icon.text-cyan-400 {
    color: #22d3ee;
}
    </style>
</head>
<body class="bg-gray-900 text-white">
    <!-- Navigation Bar -->
    <header class="fixed w-full top-0 z-50 bg-gray-900 bg-opacity-95 shadow-lg border-b border-blue-800">
        <div class="container mx-auto px-4">
            <nav class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <button class="mobile-menu-toggle mr-3" id="mobileMenuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <a href="customer_dashboard.html" class="logo-container">
                        <img src="logos.png" alt="CoastCrave Logo" class="logo">
                        <span class="brand-text hidden sm:inline">CoastCrave</span>
                        <span class="brand-text sm:hidden">CoastCrave</span>
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <div class="desktop-nav">
                    <div class="desktop-nav-item tooltip active" data-section="home" data-tooltip="Home">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="desktop-nav-item tooltip" data-section="menu" data-tooltip="Menu">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="desktop-nav-item tooltip" data-section="cart" data-tooltip="My Cart">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count-desktop absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold">0</span>
                    </div>
                    <div class="desktop-nav-item tooltip" data-section="track-order" data-tooltip="Track Order">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="desktop-nav-item tooltip" data-section="order-history" data-tooltip="Order History">
                        <i class="fas fa-history"></i>
                    </div>
                    <div class="desktop-nav-item tooltip" data-section="feedback" data-tooltip="Feedback">
                        <i class="fas fa-comment-alt"></i>
                    </div>
                    <div class="desktop-nav-item tooltip" data-section="about" data-tooltip="About Us">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="desktop-nav-item tooltip" data-section="contact" data-tooltip="Contact">
                        <i class="fas fa-phone"></i>
                    </div>
                </div>
                
                <div class="user-actions">
                    <!-- Mobile Cart Icon - Only visible on mobile -->
                    <div class="mobile-cart-icon relative cursor-pointer hover-zoom" id="cartIcon">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span class="cart-count absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold">0</span>
                    </div>
                    
                   <!-- User Dropdown - UPDATED FOR MOBILE COMPATIBILITY -->
<div class="dropdown" id="userDropdown">
    <button class="dropdown-btn hover-glow" id="dropdownToggle">
        <i class="fas fa-user"></i>
        <span id="userName" class="hidden sm:inline">Customer User</span>
        <i class="fas fa-chevron-down text-xs"></i>
    </button>
    <div class="dropdown-content">
        <!-- Profile Text Only Section -->
        <div class="user-info">
            <div class="font-semibold text-cyan-300" id="dropdownUserName">Customer User</div>
            <div class="text-sm text-gray-300" id="dropdownUserEmail">customer@coastcrave.com</div>
            <div class="text-xs text-cyan-400 mt-1 capitalize">Customer</div>
        </div>
        
        <!-- Logout Link -->
        <a href="#" id="logoutBtn">
            <i class="fas fa-sign-out-alt mr-2"></i>Logout
        </a>
    </div>
</div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <div class="dashboard-sidebar" id="dashboardSidebar">
            <ul class="sidebar-menu">
                <li>
                    <a href="#" class="active tooltip" data-section="home" data-tooltip="Dashboard Home">
                        <i class="fas fa-home"></i>
                        <span>Home</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="tooltip" data-section="menu" data-tooltip="Browse Our Menu">
                        <i class="fas fa-utensils"></i>
                        <span>Menu</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="tooltip" data-section="cart" data-tooltip="View Your Cart">
                        <i class="fas fa-shopping-cart"></i>
                        <span>My Cart</span>
                        <span class="cart-count-sidebar ml-auto bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold">0</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="tooltip" data-section="track-order" data-tooltip="Track Your Order">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Track Order</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="tooltip" data-section="order-history" data-tooltip="Order History">
                        <i class="fas fa-history"></i>
                        <span>Order History</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="tooltip" data-section="feedback" data-tooltip="Give Feedback">
                        <i class="fas fa-comment-alt"></i>
                        <span>Feedback</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="tooltip" data-section="about" data-tooltip="About Us">
                        <i class="fas fa-info-circle"></i>
                        <span>About Us</span>
                    </a>
                </li>
                <li>
                    <a href="#" class="tooltip" data-section="contact" data-tooltip="Contact Us">
                        <i class="fas fa-phone"></i>
                        <span>Contact</span>
                    </a>
                </li>
            </ul>
            
            <!-- Logout button - hidden on mobile -->
            <div class="mt-auto pt-6 border-t border-gray-700 sidebar-logout">
                <a href="#" id="sidebarLogout" class="flex items-center gap-2 px-4 py-2 text-red-400 hover:bg-red-900 hover:bg-opacity-20 rounded transition">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </a>
            </div>
        </div>

        <!-- Main Content -->
        <div class="dashboard-content" id="dashboardContent">
            <!-- Home Section -->
            <section id="home-section" class="dashboard-section active">
                <!-- Welcome Banner with Daily Specials -->
                <div class="welcome-banner mb-6">
                    <div class="relative z-10">
                        <h1 class="text-2xl md:text-3xl font-bold text-cyan-300 mb-2" id="welcomeMessage">Welcome back, <span id="welcomeUserName">Customer</span>!</h1>
                        <p class="text-white text-sm md:text-base mb-3">Your cravings are calling! Check out today's specials below.</p>
                        
                        <!-- Daily Specials Banner -->
                        <div class="bg-white bg-opacity-20 p-3 rounded-lg">
                            <p class="text-white font-semibold text-sm md:text-base">
                                <i class="fas fa-tag mr-2"></i>Today's Special: Grilled Salmon with Garlic Butter Sauce - 15% OFF!
                            </p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-8">
                    <div class="bg-blue-900 bg-opacity-20 p-4 md:p-6 rounded-lg border border-blue-700 hover-glow">
                        <div class="text-cyan-400 text-2xl md:text-3xl mb-3 md:mb-4">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3 class="text-lg md:text-xl font-bold text-cyan-300 mb-2">Current Orders</h3>
                        <p class="text-3xl md:text-4xl font-bold mb-2" id="currentOrdersCount">0</p>
                        <p class="text-gray-400 text-xs md:text-sm">You have <span id="currentOrdersText">0</span> active order(s)</p>
                    </div>
                    <div class="bg-blue-900 bg-opacity-20 p-4 md:p-6 rounded-lg border border-blue-700 hover-glow">
                        <div class="text-cyan-400 text-2xl md:text-3xl mb-3 md:mb-4">
                            <i class="fas fa-history"></i>
                        </div>
                        <h3 class="text-lg md:text-xl font-bold text-cyan-300 mb-2">Total Orders</h3>
                        <p class="text-3xl md:text-4xl font-bold mb-2" id="totalOrdersCount">0</p>
                        <p class="text-gray-400 text-xs md:text-sm">Since you joined</p>
                    </div>
                    <div class="bg-blue-900 bg-opacity-20 p-4 md:p-6 rounded-lg border border-blue-700 hover-glow">
                        <div class="text-cyan-400 text-2xl md:text-3xl mb-3 md:mb-4">
                            <i class="fas fa-star"></i>
                        </div>
                        <h3 class="text-lg md:text-xl font-bold text-cyan-300 mb-2">Loyalty Points</h3>
                        <p class="text-3xl md:text-4xl font-bold mb-2">350</p>
                        <p class="text-gray-400 text-xs md:text-sm">Redeem for discounts</p>
                        
                        <!-- Rewards Progress Bar -->
                        <div class="mt-4">
                            <div class="flex justify-between text-sm mb-1">
                                <span>350 / 500 points</span>
                                <span>Next reward</span>
                            </div>
                            <div class="rewards-progress">
                                <div class="rewards-progress-bar" style="width: 70%"></div>
                            </div>
                            <p class="text-xs text-gray-400 mt-1">150 points until your next reward!</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8">
                    <!-- Recent Orders -->
                    <div class="bg-blue-900 bg-opacity-20 p-4 md:p-6 rounded-lg border border-blue-700">
                        <h2 class="text-xl font-bold text-cyan-300 mb-4">Recent Orders</h2>
                        <div id="recentOrders" class="space-y-3 md:space-y-4">
                            <!-- Recent orders will be loaded here -->
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="bg-blue-900 bg-opacity-20 p-4 md:p-6 rounded-lg border border-blue-700">
                        <h2 class="text-xl font-bold text-cyan-300 mb-4">Quick Actions</h2>
                        <div class="grid grid-cols-2 gap-3 md:gap-4">
                            <a href="#" class="dashboard-quick-action p-3 md:p-4 bg-blue-800 bg-opacity-30 rounded-lg text-center transition hover:bg-blue-700 hover-zoom" data-section="menu">
                                <div class="text-cyan-400 text-xl md:text-2xl mb-2">
                                    <i class="fas fa-utensils"></i>
                                </div>
                                <p class="font-semibold text-sm md:text-base">Order Food</p>
                            </a>
                            <a href="#" class="dashboard-quick-action p-3 md:p-4 bg-blue-800 bg-opacity-30 rounded-lg text-center transition hover:bg-blue-700 hover-zoom" data-section="track-order">
                                <div class="text-cyan-400 text-xl md:text-2xl mb-2">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <p class="font-semibold text-sm md:text-base">Track Order</p>
                            </a>
                            <a href="#" class="dashboard-quick-action p-3 md:p-4 bg-blue-800 bg-opacity-30 rounded-lg text-center transition hover:bg-blue-700 hover-zoom" data-section="order-history">
                                <div class="text-cyan-400 text-xl md:text-2xl mb-2">
                                    <i class="fas fa-history"></i>
                                </div>
                                <p class="font-semibold text-sm md:text-base">Order History</p>
                            </a>
                            <a href="#" class="dashboard-quick-action p-3 md:p-4 bg-blue-800 bg-opacity-30 rounded-lg text-center transition hover:bg-blue-700 hover-zoom" data-section="feedback">
                                <div class="text-cyan-400 text-xl md:text-2xl mb-2">
                                    <i class="fas fa-comment-alt"></i>
                                </div>
                                <p class="font-semibold text-sm md:text-base">Give Feedback</p>
                            </a>
                        </div>
                        
                        <!-- Refer a Friend Button -->
                        <div class="mt-4 md:mt-6">
                            <button class="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-semibold transition w-full hover-glow">
                                <i class="fas fa-gift mr-2"></i>Refer a Friend & Get Rewards
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Menu Section -->
            <section id="menu-section" class="dashboard-section">
                <div class="section-title">
                    <h1 class="text-2xl md:text-3xl font-bold text-cyan-300 mb-2">Our Menu</h1>
                    <p class="text-gray-400 text-sm md:text-base">Choose from our delicious seafood selection</p>
                </div>

                <!-- Search Bar -->
                <div class="search-container">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="menuSearch" class="search-input" placeholder="Search for dishes...">
                </div>

                <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-6">
                    <button class="filter-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 active text-sm md:text-base" data-category="all">All</button>
                    <button class="filter-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 text-sm md:text-base" data-category="fish">Fish</button>
                    <button class="filter-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 text-sm md:text-base" data-category="shellfish">Shellfish</button>
                    <button class="filter-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 text-sm md:text-base" data-category="soups">Soups & Stews</button>
                    <button class="filter-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 text-sm md:text-base" data-category="squids">Squids</button>
                    <button class="filter-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 text-sm md:text-base" data-category="sauces">Sauces</button>
                </div>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6" id="menuItems">
                    <!-- Menu items will be loaded from JavaScript -->
                </div>
            </section>

            <!-- Updated Cart Section HTML -->
<section id="cart-section" class="dashboard-section">
    <div class="section-title">
        <h1 class="text-2xl md:text-3xl font-bold text-cyan-300 mb-2">My Cart</h1>
        <p class="text-gray-400 text-sm md:text-base">Review your order before checkout</p>
    </div>

    <div class="cart-container">
        <!-- Free Delivery Banner -->
        <div class="free-delivery-banner">
            <div class="free-delivery-text">
                <i class="fas fa-shipping-fast free-delivery-icon"></i>
                <span>You're eligible for FREE delivery on orders over 650!</span>
            </div>
            <div class="free-delivery-amount">650</div>
        </div>

        <!-- Delivery Progress -->
        <div class="delivery-progress-container">
            <div class="delivery-progress-text">
                <span>Add <strong><span id="amountToFreeDelivery">650</span></strong> to get free delivery</span>
                <span id="progressPercentage">0%</span>
            </div>
            <div class="delivery-progress-bar">
                <div class="delivery-progress-fill" id="deliveryProgressFill" style="width: 0%"></div>
            </div>
        </div>

        <div id="cartItems" class="cart-items-container">
            <!-- Cart items will be loaded here -->
        </div>
        
        <!-- Order Summary -->
        <div class="order-summary">
            <div class="order-summary-row">
                <span class="order-summary-label">Subtotal:</span>
                <span class="order-summary-value"><span id="cartSubtotal">0.00</span></span>
            </div>
            <div class="order-summary-row">
                <span class="order-summary-label">Delivery Fee:</span>
                <span class="order-summary-value" id="deliveryFeeDisplay"><span id="cartDeliveryFee">0.00</span></span>
            </div>
            <div class="order-summary-row order-summary-total">
                <span>Total:</span>
                <span><span id="cartTotal">0.00</span></span>
            </div>
            <div id="freeDeliveryMessage" class="free-delivery-applied" style="display: none;">
                <i class="fas fa-check-circle"></i>
                <span>Free delivery applied!</span>
            </div>
        </div>
        
        <div class="form-group mb-4">
            <label for="specialInstructions">Special Instructions</label>
            <textarea id="specialInstructions" class="form-control" placeholder="Any special requests or dietary restrictions?" rows="2"></textarea>
        </div>
        
        <div class="flex justify-end">
            <button id="checkoutBtn" class="bg-cyan-400 hover:bg-cyan-300 text-gray-900 px-4 py-2 md:px-6 md:py-3 rounded font-semibold transition w-full md:w-auto hover-glow">Proceed to Checkout</button>
        </div>
    </div>
</section>

            <!-- Track Order Section -->
<section id="track-order-section" class="dashboard-section">
    <div class="section-title">
        <h1 class="text-2xl md:text-3xl font-bold text-cyan-300 mb-2">Track Your Order</h1>
        <p class="text-gray-400 text-sm md:text-base">Monitor your order in real-time</p>
    </div>

    <!-- UPDATED: Improved search layout without container -->
    <div class="track-order-search">
        <div class="track-order-search-container">
            <i class="fas fa-search track-order-search-icon"></i>
            <input type="text" id="orderSearch" class="track-order-search-input" placeholder="Enter order ID (e.g. 12345)">
        </div>
        <button id="searchOrderBtn" class="track-order-search-btn hover-glow">
            <i class="fas fa-search mr-1"></i> Search Order
        </button>
    </div>

    <div id="orderTrackingDetails" class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-4 md:p-6">
        <!-- Order tracking details will be loaded here -->
         
        <div class="text-center py-6 md:py-8">
            <i class="fas fa-search text-4xl md:text-5xl text-gray-600 mb-3 md:mb-4"></i>
            <h3 class="text-lg md:text-xl font-bold text-gray-400">Search for an order to track its status</h3>
            <p class="text-gray-500 mt-2 text-sm md:text-base">Enter an order ID in the search bar above to view its current status and tracking information.</p>
        </div>
    </div>
</section>

            <!-- Order History Section -->
            <section id="order-history-section" class="dashboard-section">
                <div class="section-title">
                    <h1 class="text-2xl md:text-3xl font-bold text-cyan-300 mb-2">Order History</h1>
                    <p class="text-gray-400 text-sm md:text-base">View your past orders and reorder favorites</p>
                </div>

<div class="order-history-filters flex flex-wrap justify-center items-center gap-2 md:gap-4 mb-4 md:mb-6 w-full px-2">
    <button class="filter-order-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 active text-sm md:text-base" data-status="all">All Orders</button>
    <button class="filter-order-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 text-sm md:text-base" data-status="delivered">Delivered</button>
    <button class="filter-order-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 text-sm md:text-base" data-status="cancelled">Cancelled</button>
    <button class="filter-order-btn px-3 py-2 md:px-4 md:py-2 bg-blue-800 bg-opacity-30 border border-cyan-400 rounded-full text-white font-semibold transition hover:bg-cyan-400 hover:text-gray-900 text-sm md:text-base" data-status="pending">Pending</button>
</div>

                <div id="orderHistory">
                    <!-- Order history will be loaded here -->
                </div>
            </section>

           <!-- Replace the entire feedback section in your HTML with this code -->
<section id="feedback-section" class="dashboard-section">
    <div class="section-title">
        <h1 class="text-2xl md:text-3xl font-bold text-cyan-300 mb-2">Feedback & Ratings</h1>
        <p class="text-gray-400 text-sm md:text-base">Share your experience with us</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6">
        <!-- Rate Overall Experience - Compact Card -->
        <div class="feedback-form-container compact">
            <div class="feedback-header-compact">
                <h2 class="text-lg font-bold text-cyan-300 mb-3">
                    <i class="fas fa-star mr-2"></i>Rate Your Experience
                </h2>
            </div>
            <div class="star-rating mb-3" id="overallRating">
                <span class="star" data-rating="1"><i class="fas fa-star"></i></span>
                <span class="star" data-rating="2"><i class="fas fa-star"></i></span>
                <span class="star" data-rating="3"><i class="fas fa-star"></i></span>
                <span class="star" data-rating="4"><i class="fas fa-star"></i></span>
                <span class="star" data-rating="5"><i class="fas fa-star"></i></span>
            </div>
            <div class="form-group mb-3">
                <textarea id="overallFeedback" class="form-control compact" placeholder="Tell us about your experience..." rows="2"></textarea>
            </div>
            <button id="submitOverallFeedback" class="bg-cyan-400 hover:bg-cyan-300 text-gray-900 px-3 py-2 rounded font-semibold transition w-full text-sm hover-glow">Submit Feedback</button>
        </div>

        <!-- Rate Specific Order - Compact Card -->
        <div class="feedback-form-container compact">
            <div class="feedback-header-compact">
                <h2 class="text-lg font-bold text-cyan-300 mb-3">
                    <i class="fas fa-utensils mr-2"></i>Rate an Order
                </h2>
            </div>
            <div class="form-group mb-3">
                <select id="selectOrder" class="form-control compact">
                    <option value="">Choose an order to rate</option>
                    <!-- Orders will be populated here -->
                </select>
            </div>
            
            <div class="grid grid-cols-2 gap-3 mb-3">
                <div>
                    <h3 class="font-semibold text-xs text-gray-400 mb-1">Food Quality</h3>
                    <div class="star-rating compact" id="foodQualityRating">
                        <span class="star" data-rating="1"><i class="fas fa-star"></i></span>
                        <span class="star" data-rating="2"><i class="fas fa-star"></i></span>
                        <span class="star" data-rating="3"><i class="fas fa-star"></i></span>
                        <span class="star" data-rating="4"><i class="fas fa-star"></i></span>
                        <span class="star" data-rating="5"><i class="fas fa-star"></i></span>
                    </div>
                </div>
                
                <div>
                    <h3 class="font-semibold text-xs text-gray-400 mb-1">Delivery</h3>
                    <div class="star-rating compact" id="deliveryRating">
                        <span class="star" data-rating="1"><i class="fas fa-star"></i></span>
                        <span class="star" data-rating="2"><i class="fas fa-star"></i></span>
                        <span class="star" data-rating="3"><i class="fas fa-star"></i></span>
                        <span class="star" data-rating="4"><i class="fas fa-star"></i></span>
                        <span class="star" data-rating="5"><i class="fas fa-star"></i></span>
                    </div>
                </div>
            </div>
            
            <div class="form-group mb-3">
                <textarea id="orderFeedback" class="form-control compact" placeholder="Specific comments about this order..." rows="2"></textarea>
            </div>
            <button id="submitOrderFeedback" class="bg-cyan-400 hover:bg-cyan-300 text-gray-900 px-3 py-2 rounded font-semibold transition w-full text-sm hover-glow">Submit Rating</button>
        </div>
    </div>

    <!-- Previous Feedback - Compact Cards -->
    <div class="mt-6 md:mt-8">
        <h2 class="text-lg md:text-xl font-bold text-cyan-300 mb-3 text-center">Your Feedback History</h2>
        <div id="previousFeedback" class="space-y-3">
            <!-- Previous feedback will be loaded here -->
        </div>
    </div>
</section>

         <!-- About Us Section -->
<section id="about-section" class="dashboard-section">
    <div class="section-title">
        <h1 class="text-2xl md:text-3xl font-bold text-cyan-300 mb-2">About CoastCrave</h1>
        <p class="text-gray-400 text-sm md:text-base">Discover our story and passion for seafood</p>
    </div>

    <!-- Story Content Container -->
    <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6 md:p-8 mb-8">
        <h2 class="text-2xl font-bold text-cyan-300 mb-4 fade-in">Welcome to CoastCrave, where every meal is a splash of happiness!</h2>
        <p class="text-gray-300 mb-4 leading-relaxed">
           Established in 2023, our seafood restaurant was built with one goal  to bring the taste of the ocean closer to you through fast, easy, and reliable online ordering. We believe everyone deserves to enjoy delicious, freshly prepared seafood anytime, anywhere. From our kitchen to your table, every dish is made with care, passion, and a promise of quality that keeps our customers coming back for more. At CoastCrave, we dont just serve seafood  we serve smiles, comfort, and satisfaction in every bite.
        </p>
        <p class="text-gray-300 mb-4 leading-relaxed">
            Order now and taste the freshness you deserve!
        </p>
    </div>

    <!-- Image Gallery Container -->
    <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6 md:p-8 mb-8">
        <h3 class="text-2xl md:text-3xl font-bold mb-6 text-cyan-300 text-center fade-in">Image Gallery</h3>
        
        <!-- UPDATED: Image Gallery with larger images and horizontal scroll -->
        <div class="scroll-hint">
            <i class="fas fa-arrow-right"></i>
            <span>Scroll to explore more images</span>
            <i class="fas fa-arrow-left"></i>
        </div>
        <div class="image-gallery">
            <div class="gallery-item">
                <img src="Gemini_Generated_Image_qydh33qydh33qydh.png" alt="Fresh Daily Catch" class="gallery-img">
                <div class="gallery-caption">Savor the ocean's bounty at our restaurant.</div>
            </div>
            <div class="gallery-item">
                <img src="delivery coast.png" alt="Expert Preparation" class="gallery-img">
                <div class="gallery-caption">From our restaurant to your doorstep.</div>
            </div>
            <div class="gallery-item">
                <img src="Baked Mussels with cheese.jpg" alt="Beautiful Presentation" class="gallery-img">
                <div class="gallery-caption">Our restaurant's most-loved dish.</div>
            </div>
            <div class="gallery-item">
                <img src="staff cooking.jpg" alt="Seafood Platter" class="gallery-img">
                <div class="gallery-caption">The heart of our restaurant  our kitchen team.</div>
            </div>
            <div class="gallery-item">
                <img src="https://media.istockphoto.com/id/2169202108/photo/fisherman-fishing-on-boat-in-sea-during-sunset.jpg?s=612x612&w=0&k=20&c=Uty_qwu-Uwe7nLkcV_tB8BxaBpDInFibQXWMxcpkSvA=" alt="Fresh Ingredients" class="gallery-img">
                <div class="gallery-caption">Fresh Daily Catch from Local Fishermen</div>
            </div>
        </div>
        <p class="text-center text-gray-400 mt-2 text-sm">See what makes our restaurant special  scroll through.</p>
    </div>

    <!-- Feature Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6 text-center contact-card">
            <div class="text-cyan-400 text-3xl mb-4">
                <i class="fas fa-anchor"></i>
            </div>
            <h3 class="text-xl font-bold text-cyan-300 mb-2">Fresh from the Sea</h3>
            <p class="text-gray-300">Sourced daily from Philippine waters</p>
        </div>
        <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6 text-center contact-card">
            <div class="text-cyan-400 text-3xl mb-4">
                <i class="fas fa-heart"></i>
            </div>
            <h3 class="text-xl font-bold text-cyan-300 mb-2">Made with Passion</h3>
            <p class="text-gray-300">Crafted by experienced seafood chefs</p>
        </div>
        <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6 text-center contact-card">
            <div class="text-cyan-400 text-3xl mb-4">
                <i class="fas fa-truck"></i>
            </div>
            <h3 class="text-xl font-bold text-cyan-300 mb-2">Fast Delivery</h3>
            <p class="text-gray-300">Fresh to your door in minutes</p>
        </div>
    </div>
</section>

           <!-- Contact Us Section -->
<section id="contact-section" class="dashboard-section">
    <div class="section-title">
        <h1 class="text-2xl md:text-3xl font-bold text-cyan-300 mb-2">Contact Us</h1>
        <p class="text-gray-400 text-sm md:text-base">Get in touch with CoastCrave</p>
    </div>

    <div class="space-y-8">
        <!-- Map and Travel Guide - Side by Side -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Map -->
            <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6">
                <h3 class="text-lg font-bold text-cyan-300 mb-4">Find Us in San Pascual, Batangas</h3>
                <div class="map-container">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d247795.8619281855!2d120.84373469999999!3d13.8005822!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x33bd1121b5e92f1d%3A0x6a3a7c5c6e5e5e5e!2sSan%20Pascual%2C%20Batangas!5e0!3m2!1sen!2sph!4v1647856789012!5m2!1sen!2sph" 
                        width="100%" 
                        height="100%" 
                        style="border:0;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
               </div>
                <div class="p-4">
                    <h4 class="font-semibold text-cyan-300 mb-2">Our Location in San Pascual</h4>
                    <p class="text-gray-300 text-sm">Located in San Pascual, Batangas, close to well-known seafood markets in nearby towns like Bauan and Batangas City. We source our seafood from trusted suppliers to ensure consistent freshness and quality.</p>
                </div>
            </div>

            <!-- Travel Guide -->
            <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6">
                <h3 class="text-lg font-bold text-cyan-300 mb-4">How to Reach Us</h3>
                <div class="travel-guide">
                    <div class="travel-guide-item">
                        <div class="travel-guide-icon">
                            <i class="fas fa-car"></i>
                        </div>
                        <div class="travel-guide-content">
                            <h4>By Car from Manila</h4>
                            <p>Take SLEX and exit at Sta. Rosa. Continue to Tagaytay via Sta. Rosa-Tagaytay Road. From Tagaytay, take the Nasugbu Highway and follow signs to San Pascual, Batangas. Travel time is approximately 2-3 hours depending on traffic.</p>
                        </div>
                    </div>
                    
                    <div class="travel-guide-item">
                        <div class="travel-guide-icon">
                            <i class="fas fa-bus"></i>
                        </div>
                        <div class="travel-guide-content">
                            <h4>By Public Transportation</h4>
                            <p>Take a bus from Buendia or Cubao going to Batangas City. Ask to be dropped off at San Pascual junction. From there, you can take a tricycle to our restaurant. Total travel time is approximately 3-4 hours.</p>
                        </div>
                    </div>

                    <div class="travel-guide-item">
                        <div class="travel-guide-icon">
                            <i class="fas fa-map-signs"></i>
                        </div>
                        <div class="travel-guide-content">
                            <h4>Landmarks</h4>
                            <p>We're located near the San Pascual Municipal Hall, just 500 meters from the towns main road. Look for our signature blue and teal building with a large seafood mural on the side.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Cards - Horizontal Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <!-- Our Location -->
            <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6 contact-card">
                <div class="flex items-start mb-4">
                    <div class="text-cyan-400 text-xl mr-4 mt-1">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-cyan-300 mb-2">Our Location</h3>
                        <p class="text-gray-300">San Pascual, Batangas</p>
                        <p class="text-gray-400 text-sm">Near the beautiful coast of Batangas Bay</p>
                    </div>
                </div>
            </div>

            <!-- Phone Numbers -->
            <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6 contact-card">
                <div class="flex items-start mb-4">
                    <div class="text-cyan-400 text-xl mr-4 mt-1">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-cyan-300 mb-2">Phone Numbers</h3>
                        <p class="text-gray-300">(043) 123-4567</p>
                        <p class="text-gray-300">0917 123 4567</p>
                        <p class="text-gray-400 text-sm">Available 8:00 AM - 10:00 PM</p>
                    </div>
                </div>
            </div>

            <!-- Email Address -->
            <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6 contact-card">
                <div class="flex items-start mb-4">
                    <div class="text-cyan-400 text-xl mr-4 mt-1">
                        <i class="fas fa-envelope"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-cyan-300 mb-2">Email Address</h3>
                        <p class="text-gray-300">info@coastcrave.com</p>
                        <p class="text-gray-300">orders@coastcrave.com</p>
                        <p class="text-gray-400 text-sm">We respond within 24 hours</p>
                    </div>
                </div>
            </div>

            <!-- Business Hours -->
            <div class="bg-blue-900 bg-opacity-20 rounded-lg border border-blue-700 p-6 contact-card">
                <div class="flex items-start mb-4">
                    <div class="text-cyan-400 text-xl mr-4 mt-1">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div>
                        <h3 class="text-lg font-bold text-cyan-300 mb-2">Business Hours</h3>
                        <p class="text-gray-300">Monday - Sunday: 8:00 AM - 10:00 PM</p>
                        <p class="text-gray-400 text-sm">Open every day for your seafood cravings</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

    <!-- Checkout Modal - UPDATED TO REMOVE LOCATION DROPDOWN -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Checkout</h2>
            <form id="checkoutForm">
                <div class="form-group">
                    <label for="checkoutName">Full Name</label>
                    <input type="text" id="checkoutName" class="form-control" placeholder="Enter your full name" required>
                </div>
                <div class="form-group">
                    <label for="checkoutAddress">Delivery Address</label>
                    <textarea id="checkoutAddress" class="form-control" placeholder="Enter your full delivery address (street, barangay, city/municipality)" required rows="3"></textarea>
                    <p class="text-xs text-gray-400 mt-1">Delivery fee will be calculated automatically based on your location</p>
                </div>
                <div class="form-group">
                    <label for="checkoutPhone">Phone Number</label>
                    <input type="tel" id="checkoutPhone" class="form-control" placeholder="Enter your phone number" required>
                </div>
                
                <!-- Payment Method Selection -->
                <div class="form-group">
                    <label>Payment Method</label>
                    <div class="payment-options">
                        <div class="payment-option" data-method="cash">
                            <div class="payment-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="payment-info">
                                <div class="payment-title">Cash on Delivery</div>
                                <div class="payment-description">Pay with cash when your order arrives</div>
                            </div>
                        </div>
                        
                        <div class="payment-option" data-method="gcash">
                            <div class="payment-icon">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div class="payment-info">
                                <div class="payment-title">GCash</div>
                                <div class="payment-description">Pay using your GCash account</div>
                            </div>
                        </div>
                        
                        <div class="payment-option" data-method="card">
                            <div class="payment-icon">
                                <i class="fas fa-credit-card"></i>
                            </div>
                            <div class="payment-info">
                                <div class="payment-title">Credit/Debit Card</div>
                                <div class="payment-description">Pay with your credit or debit card</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Payment Method Details -->
                    <div id="paymentDetails">
                        <!-- Payment details will be shown here based on selection -->
                    </div>
                </div>
                
                <!-- Order Summary in Checkout -->
                <div class="bg-blue-900 bg-opacity-20 rounded-lg p-3 mb-4">
                    <h3 class="font-semibold text-cyan-300 mb-2">Order Summary</h3>
                    <div class="space-y-1 text-sm">
                        <div class="flex justify-between">
                            <span>Subtotal:</span>
                            <span><span id="checkoutSubtotal">0.00</span></span>
                        </div>
                        <div class="flex justify-between">
                            <span>Delivery Fee:</span>
                            <span><span id="checkoutDeliveryFee">0.00</span></span>
                        </div>
                        <div class="flex justify-between font-bold text-cyan-300 border-t border-gray-700 pt-1 mt-1">
                            <span>Total:</span>
                            <span><span id="checkoutTotal">0.00</span></span>
                        </div>
                    </div>
                </div>
                
                 <!-- NEW: Back Button and Place Order Button -->
            <div class="flex justify-between gap-3">
                <button type="button" id="backToCartBtn" class="bg-transparent border border-cyan-400 text-cyan-400 hover:bg-cyan-400 hover:text-gray-900 px-4 py-2 rounded font-semibold transition flex-1 text-sm hover-glow">
                    <i class="fas fa-arrow-left mr-2"></i> Back to Cart
                </button>
                <button type="submit" class="bg-cyan-400 hover:bg-cyan-300 text-gray-900 px-4 py-2 rounded font-semibold transition flex-1 text-sm hover-glow">Place Order</button>
            </div>
        </form>
    </div>
</div>

    <!-- Order Confirmation Modal -->
    <div id="orderConfirmationModal" class="modal">
        <div class="modal-content text-center">
            <span class="close-modal">&times;</span>
            <div class="text-4xl md:text-5xl text-green-500 mb-4">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 class="text-xl md:text-2xl font-bold text-cyan-300 mb-4">Order Placed Successfully!</h2>
            <p class="mb-6 text-sm md:text-base">Your order has been received and is being prepared. You can track your order status in your account.</p>
            <p class="mb-2 text-sm md:text-base">Order ID: <span id="orderId" class="font-bold">#12345</span></p>
            <p class="mb-2 text-sm md:text-base">Payment Method: <span id="paymentMethod" class="font-bold">Cash on Delivery</span></p>
            <p class="mb-6 text-sm md:text-base">Estimated delivery: <span id="deliveryTime" class="font-bold">45 minutes</span></p>
            <button id="closeOrderModal" class="bg-cyan-400 hover:bg-cyan-300 text-gray-900 px-6 py-2 rounded font-semibold transition w-full md:w-auto hover-glow">Continue Shopping</button>
        </div>
    </div>

    <!-- Receipt Modal -->
    <div id="receiptModal" class="receipt-modal">
        <div class="receipt-content">
            <div class="receipt-header">
                <div class="receipt-title">CoastCrave Seafood</div>
                <div class="receipt-subtitle">Fresh from the Sea to Your Table</div>
                <div class="text-xs mt-1" id="receiptDate"></div>
            </div>
            
            <div class="receipt-body">
                <div class="receipt-item">
                    <span>Order ID:</span>
                    <span id="receiptOrderId"></span>
                </div>
                
                <div class="receipt-divider"></div>
                
                <div id="receiptItems">
                    <!-- Receipt items will be populated here -->
                </div>
                
                <div class="receipt-divider"></div>
                
                <div class="receipt-item">
                    <span>Subtotal:</span>
                    <span id="receiptSubtotal"></span>
                </div>
                <div class="receipt-item">
                    <span>Delivery Fee:</span>
                    <span id="receiptDeliveryFee"></span>
                </div>
                
                <div class="receipt-total">
                    <span>TOTAL:</span>
                    <span id="receiptTotal"></span>
                </div>
                
                <div class="receipt-divider"></div>
                
                <div class="receipt-item">
                    <span>Payment Method:</span>
                    <span id="receiptPaymentMethod"></span>
                </div>
                <div class="receipt-item">
                    <span>Delivery Address:</span>
                    <span id="receiptAddress"></span>
                </div>
            </div>
            
            <div class="receipt-footer">
                <p>Thank you for choosing CoastCrave!</p>
                <p>We hope to serve you again soon.</p>
            </div>
            
            <div class="receipt-actions">
                <button class="receipt-btn receipt-print" id="printReceipt">
                    <i class="fas fa-print mr-2"></i> Print
                </button>
                <button class="receipt-btn receipt-close" id="closeReceipt">
                    <i class="fas fa-times mr-2"></i> Close
                </button>
            </div>
        </div>
    </div>

    <!-- Logout Confirmation Notification -->
    <div id="logoutNotification" class="notification-container">
        <div class="notification">
            <button class="notification-close" id="closeLogoutNotification">
                <i class="fas fa-times"></i>
            </button>
            <div class="notification-header">
                <div class="notification-icon text-red-500">
                    <i class="fas fa-sign-out-alt"></i>
                </div>
                <div class="notification-title">Confirm Logout</div>
            </div>
            <div class="notification-body">
                <div class="notification-message">
                    Are you sure you want to logout from your CoastCrave account?
                </div>
                <div class="notification-actions">
                    <button class="notification-btn notification-btn-secondary" id="cancelLogout">
                        Cancel
                    </button>
                    <button class="notification-btn notification-btn-primary" id="confirmLogout">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </div>
  </section>

    <!-- Footer -->
    <footer class="bg-gray-900 py-8 border-t border-blue-800">
        <div class="container mx-auto px-4">
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-500">
                <p>&copy; 2025 CoastCrave. All rights reserved.</p>
            </div>
        </div>
    </footer>

<script>
    // Application State
    let appState = {
        isLoggedIn: true,
        currentUser: {
            id: 3,
            name: 'Customer User',
            email: 'customer@coastcrave.com',
            type: 'customer',
            status: 'active'
        },
        cart: [],
        orders: [],
        menuItems: [], // Start with empty array, will load from localStorage
        feedbacks: [], // Add feedbacks to appState
        deliveryFee: 0,
        detectedLocation: '',
        dateFilter: {
            fromDate: null,
            toDate: null
        }
    };

    // DOM Elements
    const checkoutModal = document.getElementById('checkoutModal');
    const orderConfirmationModal = document.getElementById('orderConfirmationModal');
    const receiptModal = document.getElementById('receiptModal');
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const mobileOverlay = document.getElementById('mobileOverlay');
    const dashboardSidebar = document.getElementById('dashboardSidebar');
    const logoutNotification = document.getElementById('logoutNotification');
    const closeLogoutNotification = document.getElementById('closeLogoutNotification');
    const cancelLogout = document.getElementById('cancelLogout');
    const confirmLogout = document.getElementById('confirmLogout');

    // =============================================
    // NEW: Cart Persistence Functions
    // =============================================

    // Save cart to localStorage
    function saveCartToStorage() {
        try {
            const cartData = {
                items: appState.cart,
                userId: appState.currentUser.id,
                timestamp: new Date().toISOString()
            };
            localStorage.setItem(`cart_${appState.currentUser.id}`, JSON.stringify(cartData));
            console.log('Cart saved to localStorage for user:', appState.currentUser.id);
        } catch (error) {
            console.error('Error saving cart to localStorage:', error);
        }
    }

    // Load cart from localStorage
    function loadCartFromStorage() {
        try {
            const savedCart = localStorage.getItem(`cart_${appState.currentUser.id}`);
            if (savedCart) {
                const cartData = JSON.parse(savedCart);
                
                // Only load cart if it belongs to the current user
                if (cartData.userId === appState.currentUser.id) {
                    appState.cart = cartData.items || [];
                    console.log('Cart loaded from localStorage:', appState.cart.length, 'items');
                    
                    // Update UI
                    updateCartCount();
                    updateCartSection();
                }
            } else {
                console.log('No saved cart found for user:', appState.currentUser.id);
            }
        } catch (error) {
            console.error('Error loading cart from localStorage:', error);
            appState.cart = [];
        }
    }

    // Clear cart from localStorage (when user checks out)
    function clearCartFromStorage() {
        try {
            localStorage.removeItem(`cart_${appState.currentUser.id}`);
            console.log('Cart cleared from localStorage for user:', appState.currentUser.id);
        } catch (error) {
            console.error('Error clearing cart from localStorage:', error);
        }
    }

    // =============================================
    // MODIFIED: Add to Cart function with persistence
    // =============================================

    // Add item to cart
    function addToCart(itemId) {
        const item = appState.menuItems.find(i => i.id === itemId);
        
        if (item) {
            const existingItem = appState.cart.find(i => i.id === itemId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                appState.cart.push({
                    ...item,
                    quantity: 1
                });
            }
            
            updateCartCount();
            updateCartSection();
            saveCartToStorage(); // NEW: Save cart after modification
            
            // Animation effect
            const button = document.querySelector(`.add-to-cart[data-id="${itemId}"]`);
            const originalText = button.textContent;
            button.textContent = 'Added!';
            button.classList.add('bg-green-500');
            button.classList.remove('bg-cyan-400', 'hover:bg-cyan-300');
            
            setTimeout(() => {
                button.textContent = originalText;
                button.classList.remove('bg-green-500');
                button.classList.add('bg-cyan-400', 'hover:bg-cyan-300');
            }, 1500);
        }
    }

    // =============================================
    // MODIFIED: Update Cart Section with persistence
    // =============================================

   // Update cart section with free delivery logic
function updateCartSection() {
    const cartItemsContainer = document.getElementById('cartItems');
    const cartSubtotalElement = document.getElementById('cartSubtotal');
    const cartDeliveryFeeElement = document.getElementById('cartDeliveryFee');
    const cartTotalElement = document.getElementById('cartTotal');
    const deliveryFeeDisplay = document.getElementById('deliveryFeeDisplay');
    const freeDeliveryMessage = document.getElementById('freeDeliveryMessage');
    const amountToFreeDelivery = document.getElementById('amountToFreeDelivery');
    const progressPercentage = document.getElementById('progressPercentage');
    const deliveryProgressFill = document.getElementById('deliveryProgressFill');
    
    cartItemsContainer.innerHTML = '';
    
    if (appState.cart.length === 0) {
        cartItemsContainer.innerHTML = `
            <div class="empty-cart">
                <div class="empty-cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <h3 class="text-lg font-bold text-gray-400 mb-2">Your cart is empty</h3>
                <p class="text-gray-500 mb-4">Add some delicious seafood to get started!</p>
            </div>
        `;
        cartSubtotalElement.textContent = '0.00';
        cartDeliveryFeeElement.textContent = '0.00';
        cartTotalElement.textContent = '0.00';
        
        // Reset delivery progress
        amountToFreeDelivery.textContent = '650';
        progressPercentage.textContent = '0%';
        deliveryProgressFill.style.width = '0%';
        freeDeliveryMessage.style.display = 'none';
        deliveryFeeDisplay.className = 'order-summary-value';
    } else {
        let subtotal = 0;
        
        appState.cart.forEach(item => {
            const itemTotal = item.price * item.quantity;
            subtotal += itemTotal;
            
            const cartItem = document.createElement('div');
            cartItem.className = 'cart-item';
            cartItem.innerHTML = `
                <div class="cart-item-image" style="background-image: url('${item.image}');"></div>
                <div class="cart-item-details">
                    <div class="cart-item-name">${item.name}</div>
                    <div class="cart-item-price">${item.price.toFixed(2)} each</div>
                </div>
                <div class="cart-item-controls">
                    <div class="quantity-controls">
                        <button class="quantity-btn decrease hover-glow" data-id="${item.id}">-</button>
                        <span class="quantity-display">${item.quantity}</span>
                        <button class="quantity-btn increase hover-glow" data-id="${item.id}">+</button>
                    </div>
                    <div class="cart-item-total">${itemTotal.toFixed(2)}</div>
                    <button class="remove-item" data-id="${item.id}">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            cartItemsContainer.appendChild(cartItem);
        });
        
        // Calculate delivery fee based on free delivery threshold
        const FREE_DELIVERY_THRESHOLD = 650;
        let deliveryFee = 0;
        let amountNeeded = FREE_DELIVERY_THRESHOLD - subtotal;
        
        // FIXED: Always calculate delivery fee based on subtotal
        if (subtotal >= FREE_DELIVERY_THRESHOLD) {
            deliveryFee = 0;
            freeDeliveryMessage.style.display = 'flex';
            deliveryFeeDisplay.className = 'order-summary-value text-green-500 line-through';
        } else {
            // Only apply delivery fee if subtotal is below threshold
            deliveryFee = appState.deliveryFee;
            freeDeliveryMessage.style.display = 'none';
            deliveryFeeDisplay.className = 'order-summary-value';
        }
        
        const total = subtotal + deliveryFee;
        
        cartSubtotalElement.textContent = subtotal.toFixed(2);
        cartDeliveryFeeElement.textContent = deliveryFee.toFixed(2);
        cartTotalElement.textContent = total.toFixed(2);
        
        // Update delivery progress
        if (subtotal >= FREE_DELIVERY_THRESHOLD) {
            amountToFreeDelivery.textContent = '0';
            progressPercentage.textContent = '100%';
            deliveryProgressFill.style.width = '100%';
        } else {
            amountToFreeDelivery.textContent = Math.max(0, amountNeeded).toFixed(0);
            const progress = Math.min(100, (subtotal / FREE_DELIVERY_THRESHOLD) * 100);
            progressPercentage.textContent = `${Math.round(progress)}%`;
            deliveryProgressFill.style.width = `${progress}%`;
        }
        
        // Update checkout summary
        const checkoutSubtotal = document.getElementById('checkoutSubtotal');
        const checkoutDeliveryFee = document.getElementById('checkoutDeliveryFee');
        const checkoutTotal = document.getElementById('checkoutTotal');
        
        if (checkoutSubtotal) {
            checkoutSubtotal.textContent = subtotal.toFixed(2);
        }
        if (checkoutDeliveryFee) {
            checkoutDeliveryFee.textContent = deliveryFee.toFixed(2);
        }
        if (checkoutTotal) {
            checkoutTotal.textContent = total.toFixed(2);
        }
        
        // Set up quantity controls
        document.querySelectorAll('.quantity-btn.increase').forEach(button => {
            button.addEventListener('click', function() {
                const itemId = parseInt(this.getAttribute('data-id'));
                const item = appState.cart.find(i => i.id === itemId);
                if (item) {
                    item.quantity += 1;
                    updateCartSection();
                    updateCartCount();
                    saveCartToStorage();
                }
            });
        });
        
        document.querySelectorAll('.quantity-btn.decrease').forEach(button => {
            button.addEventListener('click', function() {
                const itemId = parseInt(this.getAttribute('data-id'));
                const item = appState.cart.find(i => i.id === itemId);
                if (item && item.quantity > 1) {
                    item.quantity -= 1;
                    updateCartSection();
                    updateCartCount();
                    saveCartToStorage();
                }
            });
        });
        
        document.querySelectorAll('.remove-item').forEach(button => {
            button.addEventListener('click', function() {
                const itemId = parseInt(this.getAttribute('data-id'));
                appState.cart = appState.cart.filter(i => i.id !== itemId);
                updateCartSection();
                updateCartCount();
                saveCartToStorage();
            });
        });
    }
}

// Also update the checkout function to ensure free delivery is applied
function handleCheckout(e) {
    e.preventDefault();
    
    const name = document.getElementById('checkoutName').value;
    const address = document.getElementById('checkoutAddress').value;
    const phone = document.getElementById('checkoutPhone').value;
    const specialInstructions = document.getElementById('specialInstructions').value;
    
    // Get selected payment method
    const paymentMethod = getSelectedPaymentMethod();
    
    // Validate payment details
    if (!validatePaymentDetails(paymentMethod)) {
        return;
    }
    
    // Validate that address has been entered
    if (!address || address.trim() === '') {
        alert('Please enter your delivery address to calculate delivery fee.');
        return;
    }
    
    // Calculate subtotal and delivery fee
    const subtotal = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const FREE_DELIVERY_THRESHOLD = 650;
    
    // FIXED: Apply free delivery logic here too
    let deliveryFee = subtotal >= FREE_DELIVERY_THRESHOLD ? 0 : appState.deliveryFee;
    const total = subtotal + deliveryFee;
    
    // Create order with deep copies
    const order = {
        id: generateOrderId(),
        customer: {
            name,
            address,
            phone,
            email: appState.currentUser.email
        },
        items: appState.cart.map(item => ({
            id: item.id,
            name: item.name,
            price: item.price,
            quantity: item.quantity,
            image: item.image,
            category: item.category
        })),
        subtotal: subtotal,
        deliveryFee: deliveryFee, // Use the calculated delivery fee
        total: total,
        status: 'pending',
        paymentMethod: getPaymentMethodDisplayName(paymentMethod),
        paymentMethodCode: paymentMethod,
        specialInstructions: specialInstructions,
        date: new Date().toISOString(),
        detectedLocation: appState.detectedLocation
    };
    
    // Add to user's orders (create deep copy)
    appState.orders.unshift({
        ...order,
        customer: {...order.customer},
        items: order.items.map(item => ({...item}))
    });
    
    // Save ALL orders to localStorage (for admin/staff access)
    saveAllOrdersToStorage(order);
    
    // Clear cart
    appState.cart = [];
    appState.deliveryFee = 0;
    appState.detectedLocation = '';
    updateCartCount();
    updateCartSection();
    clearCartFromStorage();
    
    // Update UI
    updateOrderHistory();
    updateRecentOrders();
    updateDashboardStats();
    
    // Show receipt
    showReceipt(order);
    
    // Close checkout modal
    checkoutModal.style.display = 'none';
}

    // =============================================
    // MODIFIED: Initialize application with cart loading
    // =============================================

    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
        // Check if user is logged in and is a customer
        const savedUser = localStorage.getItem('currentUser');
        if (savedUser) {
            const user = JSON.parse(savedUser);
            if (user.type === 'customer') {
                appState.currentUser = user;
                appState.isLoggedIn = true;
            } else {
                // Redirect non-customer users to appropriate pages
                if (user.type === 'admin') {
                    window.location.href = 'admin.html';
                } else if (user.type === 'staff') {
                    window.location.href = 'staff.html';
                }
            }
        } else {
            // Redirect to login if not logged in
            window.location.href = 'index.html';
        }
        
        // Load user orders from localStorage
        loadUserOrders();
        
        // Load menu items from localStorage first
        loadMenuItemsFromStorage();
        
        // Load feedbacks from localStorage
        loadFeedbacks();
        
        // NEW: Load cart from localStorage
        loadCartFromStorage();
        
        setupEventListeners();
        setupOrderHistoryFilters();
        setupDateFiltering(); // NEW: Set up date filtering
        updateUIForAuth();
        updateCartCount();
        updateCartSection();
        updateOrderHistory();
        updateRecentOrders();
        updateDashboardStats();
        
        // Set up payment method selection
        setupPaymentMethods();
        
        // Set up welcome message variations
        setupWelcomeMessages();
        
        // Set up desktop navigation
        setupDesktopNavigation();
        
        // Set up search functionality
        setupSearch();
        
        // Set up feedback functionality
        setupFeedback();
        
        // Set up receipt functionality
        setupReceipt();
        
        // Set up logout notification
        setupLogoutNotification();
        
        // UPDATED: Set up mobile dropdown functionality
        setupMobileDropdown();
        
        // Set up address detection for delivery fee
        setupAddressDetection();
        
        // NEW: Set up order search functionality
        setupOrderSearch();
        
    });

    // =============================================
    // NEW: Order Search Functionality
    // =============================================

    // Set up order search functionality
    function setupOrderSearch() {
        const searchOrderBtn = document.getElementById('searchOrderBtn');
        const orderSearchInput = document.getElementById('orderSearch');
        
        if (searchOrderBtn) {
            searchOrderBtn.addEventListener('click', function() {
                const orderId = orderSearchInput.value.trim();
                if (orderId) {
                    displayOrderTracking(orderId);
                } else {
                    alert('Please enter an order ID to search.');
                }
            });
        }
        
        // Allow pressing Enter to search
        if (orderSearchInput) {
            orderSearchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const orderId = this.value.trim();
                    if (orderId) {
                        displayOrderTracking(orderId);
                    } else {
                        alert('Please enter an order ID to search.');
                    }
                }
            });
        }
    }

    // =============================================
    // NEW: Date Filtering Functionality
    // =============================================

    // Set up date filtering
    function setupDateFiltering() {
        const applyDateFilterBtn = document.getElementById('applyDateFilter');
        const resetDateFilterBtn = document.getElementById('resetDateFilter');
        
        if (applyDateFilterBtn) {
            applyDateFilterBtn.addEventListener('click', function() {
                applyDateFilter();
            });
        }
        
        if (resetDateFilterBtn) {
            resetDateFilterBtn.addEventListener('click', function() {
                resetDateFilter();
            });
        }
    }

    // Apply date filter to orders
    function applyDateFilter() {
        const fromDateInput = document.getElementById('fromDate');
        const toDateInput = document.getElementById('toDate');
        
        const fromDate = fromDateInput.value ? new Date(fromDateInput.value) : null;
        const toDate = toDateInput.value ? new Date(toDateInput.value) : null;
        
        // Validate date range
        if (fromDate && toDate && fromDate > toDate) {
            alert('From date cannot be after To date.');
            return;
        }
        
        appState.dateFilter.fromDate = fromDate;
        appState.dateFilter.toDate = toDate;
        
        // Update order history with date filter
        updateOrderHistory();
    }

    // Reset date filter
    function resetDateFilter() {
        const fromDateInput = document.getElementById('fromDate');
        const toDateInput = document.getElementById('toDate');
        
        fromDateInput.value = '';
        toDateInput.value = '';
        
        appState.dateFilter.fromDate = null;
        appState.dateFilter.toDate = null;
        
        // Update order history without date filter
        updateOrderHistory();
    }

    // Filter orders by date range
    function filterOrdersByDate(orders) {
        const { fromDate, toDate } = appState.dateFilter;
        
        if (!fromDate && !toDate) {
            return orders; // No date filter applied
        }
        
        return orders.filter(order => {
            const orderDate = new Date(order.date);
            
            // Check if order date is within the specified range
            let isInRange = true;
            
            if (fromDate) {
                isInRange = isInRange && orderDate >= fromDate;
            }
            
            if (toDate) {
                // Set toDate to end of day for inclusive filtering
                const endOfDay = new Date(toDate);
                endOfDay.setHours(23, 59, 59, 999);
                isInRange = isInRange && orderDate <= endOfDay;
            }
            
            return isInRange;
        });
    }

    // =============================================
    // MODIFIED: Logout to clear cart (optional - uncomment if needed)
    // =============================================

    // Set up logout notification
    function setupLogoutNotification() {
        // Close notification when clicking the close button
        closeLogoutNotification.addEventListener('click', function() {
            logoutNotification.classList.remove('show');
        });
        
        // Cancel logout
        cancelLogout.addEventListener('click', function() {
            logoutNotification.classList.remove('show');
        });
        
        // Confirm logout
        confirmLogout.addEventListener('click', function() {
            // Optional: Uncomment the line below if you want to clear cart on logout
            // clearCartFromStorage();
            
            localStorage.removeItem('currentUser');
            window.location.href = 'index.html';
        });
        
        // Close notification when clicking outside
        logoutNotification.addEventListener('click', function(e) {
            if (e.target === logoutNotification) {
                logoutNotification.classList.remove('show');
            }
        });
    }

    // =============================================
    // ALL YOUR EXISTING FUNCTIONS REMAIN THE SAME
    // =============================================

    // Set up address detection for delivery fee
    function setupAddressDetection() {
        const checkoutAddress = document.getElementById('checkoutAddress');
        if (checkoutAddress) {
            checkoutAddress.addEventListener('input', function() {
                detectLocationAndCalculateFee(this.value);
            });
        }
    }

    // Detect location and calculate delivery fee based on address
    function detectLocationAndCalculateFee(address) {
        if (!address || address.trim() === '') {
            appState.deliveryFee = 0;
            appState.detectedLocation = '';
            updateDeliveryFeeDisplay();
            return;
        }
        
        const addressLower = address.toLowerCase();
        let detectedLocation = '';
        let deliveryFee = 0;
        
        // Detect location based on keywords in the address
        if (addressLower.includes('san pascual')) {
            detectedLocation = 'San Pascual';
            deliveryFee = 30;
        } else if (addressLower.includes('bauan')) {
            detectedLocation = 'Bauan';
            deliveryFee = 40;
        } else if (addressLower.includes('mabini')) {
            detectedLocation = 'Mabini';
            deliveryFee = 50;
        } else if (addressLower.includes('batangas city') || addressLower.includes('batangas city')) {
            detectedLocation = 'Batangas City';
            deliveryFee = 60;
        } else if (addressLower.includes('manila')) {
            detectedLocation = 'Manila';
            deliveryFee = 300;
        } else {
            // Default delivery fee for other locations
            detectedLocation = 'Other Location';
            deliveryFee = 100;
        }
        
        appState.deliveryFee = deliveryFee;
        appState.detectedLocation = detectedLocation;
        updateDeliveryFeeDisplay();
    }

    // Update delivery fee display in cart and checkout
    function updateDeliveryFeeDisplay() {
        const deliveryFeeAmount = document.getElementById('deliveryFeeAmount');
        const locationDetection = document.getElementById('locationDetection');
        const cartDeliveryFee = document.getElementById('cartDeliveryFee');
        const checkoutDeliveryFee = document.getElementById('checkoutDeliveryFee');
        
        if (appState.detectedLocation) {
            deliveryFeeAmount.textContent = `${appState.deliveryFee.toFixed(2)}`;
            locationDetection.textContent = `Detected location: ${appState.detectedLocation}`;
            locationDetection.className = 'location-detection text-cyan-400';
        } else {
            deliveryFeeAmount.textContent = '0.00';
            locationDetection.textContent = 'Enter your location in checkout to calculate delivery fee';
            locationDetection.className = 'location-detection';
        }
        
        if (cartDeliveryFee) {
            cartDeliveryFee.textContent = appState.deliveryFee.toFixed(2);
        }
        
        if (checkoutDeliveryFee) {
            checkoutDeliveryFee.textContent = appState.deliveryFee.toFixed(2);
        }
        
        // Update cart totals
        updateCartSection();
    }

    // UPDATED: Set up mobile dropdown functionality
    function setupMobileDropdown() {
        const dropdownToggle = document.getElementById('dropdownToggle');
        const userDropdown = document.getElementById('userDropdown');
        
        if (dropdownToggle && userDropdown) {
            dropdownToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                userDropdown.classList.toggle('active');
            });
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!userDropdown.contains(e.target)) {
                    userDropdown.classList.remove('active');
                }
            });
            
            // Prevent dropdown from closing when clicking inside it
            userDropdown.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        }
    }

    // Show logout confirmation
    function showLogoutConfirmation() {
        logoutNotification.classList.add('show');
    }

    // Set up receipt functionality
    function setupReceipt() {
        document.getElementById('printReceipt').addEventListener('click', function() {
            window.print();
        });
        
        document.getElementById('closeReceipt').addEventListener('click', function() {
            receiptModal.style.display = 'none';
        });
    }

    // Show receipt after order placement
    function showReceipt(order) {
        const receiptDate = document.getElementById('receiptDate');
        const receiptOrderId = document.getElementById('receiptOrderId');
        const receiptItems = document.getElementById('receiptItems');
        const receiptSubtotal = document.getElementById('receiptSubtotal');
        const receiptDeliveryFee = document.getElementById('receiptDeliveryFee');
        const receiptTotal = document.getElementById('receiptTotal');
        const receiptPaymentMethod = document.getElementById('receiptPaymentMethod');
        const receiptAddress = document.getElementById('receiptAddress');
        
        // Set receipt data
        receiptDate.textContent = new Date().toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        });
        
        receiptOrderId.textContent = `#${order.id}`;
        
        // Calculate subtotal
        const subtotal = order.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        
        // Populate receipt items
        receiptItems.innerHTML = '';
        order.items.forEach(item => {
            const itemElement = document.createElement('div');
            itemElement.className = 'receipt-item';
            itemElement.innerHTML = `
                <div>${item.name} x ${item.quantity}</div>
                <div>${(item.price * item.quantity).toFixed(2)}</div>
            `;
            receiptItems.appendChild(itemElement);
        });
        
        // Set receipt values
        receiptSubtotal.textContent = `${subtotal.toFixed(2)}`;
        receiptDeliveryFee.textContent = `${order.deliveryFee.toFixed(2)}`;
        receiptTotal.textContent = `${order.total.toFixed(2)}`;
        receiptPaymentMethod.textContent = order.paymentMethod;
        receiptAddress.textContent = order.customer.address;
        
        // Show receipt modal
        receiptModal.style.display = 'block';
    }

    // Load feedbacks from localStorage
    function loadFeedbacks() {
        try {
            const savedFeedbacks = localStorage.getItem('customerFeedbacks');
            if (savedFeedbacks) {
                appState.feedbacks = JSON.parse(savedFeedbacks);
            } else {
                appState.feedbacks = [];
            }
            
            // Filter feedbacks to only show current user's feedbacks
            appState.feedbacks = appState.feedbacks.filter(feedback => 
                feedback.user && feedback.user.email === appState.currentUser.email
            );
            
            // Update the feedback display
            updatePreviousFeedback();
        } catch (error) {
            console.error('Error loading feedbacks:', error);
            appState.feedbacks = [];
        }
    }

    // Save feedbacks to localStorage
    function saveFeedbacks() {
        try {
            // Get all feedbacks from localStorage
            const allFeedbacks = localStorage.getItem('customerFeedbacks');
            let existingFeedbacks = [];
            
            if (allFeedbacks) {
                existingFeedbacks = JSON.parse(allFeedbacks);
            }
            
            // Find and update or add the current user's feedbacks
            const userFeedbacks = appState.feedbacks.filter(feedback => 
                feedback.user && feedback.user.email === appState.currentUser.email
            );
            
            // Remove existing feedbacks from this user
            existingFeedbacks = existingFeedbacks.filter(feedback => 
                !feedback.user || feedback.user.email !== appState.currentUser.email
            );
            
            // Add current user's feedbacks
            existingFeedbacks = [...existingFeedbacks, ...userFeedbacks];
            
            // Save back to localStorage
            localStorage.setItem('customerFeedbacks', JSON.stringify(existingFeedbacks));
        } catch (error) {
            console.error('Error saving feedbacks:', error);
        }
    }

    // Set up search functionality
    function setupSearch() {
        const searchInput = document.getElementById('menuSearch');
        if (searchInput) {
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                filterMenuItems(searchTerm);
            });
        }
    }

    // Filter menu items based on search term
    function filterMenuItems(searchTerm) {
        const menuContainer = document.getElementById('menuItems');
        const allMenuItems = document.querySelectorAll('.menu-item');
        
        if (searchTerm === '') {
            // Show all items if search is empty
            allMenuItems.forEach(item => {
                item.style.display = 'block';
            });
            return;
        }
        
        // Filter items based on search term
        allMenuItems.forEach(item => {
            const title = item.querySelector('.menu-title h3').textContent.toLowerCase();
            const description = item.querySelector('.menu-desc').textContent.toLowerCase();
            
            if (title.includes(searchTerm) || description.includes(searchTerm)) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
    }

    // Set up feedback functionality
    function setupFeedback() {
        // Set up star rating for overall feedback
        setupStarRating('overallRating');
        
        // Set up star rating for food quality
        setupStarRating('foodQualityRating');
        
        // Set up star rating for delivery service
        setupStarRating('deliveryRating');
        
        // Set up submit buttons
        document.getElementById('submitOverallFeedback').addEventListener('click', submitOverallFeedback);
        document.getElementById('submitOrderFeedback').addEventListener('click', submitOrderFeedback);
        
        // Populate order dropdown for feedback
        populateOrderFeedbackDropdown();
    }

    // Set up star rating for a specific container
    function setupStarRating(containerId) {
        const container = document.getElementById(containerId);
        if (!container) return;
        
        const stars = container.querySelectorAll('.star');
        
        stars.forEach(star => {
            star.addEventListener('click', function() {
                const rating = parseInt(this.getAttribute('data-rating'));
                
                // Update all stars in this container
                stars.forEach((s, index) => {
                    if (index < rating) {
                        s.classList.add('active');
                        s.innerHTML = '<i class="fas fa-star"></i>';
                    } else {
                        s.classList.remove('active');
                        s.innerHTML = '<i class="far fa-star"></i>';
                    }
                });
            });
        });
    }

    // Get rating from a star container
    function getRating(containerId) {
        const container = document.getElementById(containerId);
        if (!container) return 0;
        
        const activeStars = container.querySelectorAll('.star.active');
        return activeStars.length;
    }

    // Submit overall feedback
    function submitOverallFeedback() {
        const rating = getRating('overallRating');
        const comment = document.getElementById('overallFeedback').value.trim();
        
        if (rating === 0) {
            alert('Please select a rating before submitting feedback.');
            return;
        }
        
        if (comment === '') {
            alert('Please provide some comments with your feedback.');
            return;
        }
        
        const feedback = {
            id: generateFeedbackId(),
            type: 'overall',
            rating: rating,
            comment: comment,
            user: {
                name: appState.currentUser.name,
                email: appState.currentUser.email
            },
            date: new Date().toISOString()
        };
        
        // Add to feedbacks
        appState.feedbacks.unshift(feedback);
        
        // Save to localStorage
        saveFeedbacks();
        
        // Update display
        updatePreviousFeedback();
        
        // Reset form
        document.getElementById('overallFeedback').value = '';
        resetStarRating('overallRating');
        
        // Show success message
        alert('Thank you for your feedback!');
    }

    // Submit order-specific feedback
    function submitOrderFeedback() {
        const orderId = document.getElementById('selectOrder').value;
        const foodRating = getRating('foodQualityRating');
        const deliveryRating = getRating('deliveryRating');
        const comment = document.getElementById('orderFeedback').value.trim();
        
        if (!orderId) {
            alert('Please select an order to provide feedback for.');
            return;
        }
        
        if (foodRating === 0 || deliveryRating === 0) {
            alert('Please provide ratings for both food quality and delivery service.');
            return;
        }
        
        const feedback = {
            id: generateFeedbackId(),
            type: 'order',
            orderId: orderId,
            foodRating: foodRating,
            deliveryRating: deliveryRating,
            comment: comment,
            user: {
                name: appState.currentUser.name,
                email: appState.currentUser.email
            },
            date: new Date().toISOString()
        };
        
        // Add to feedbacks
        appState.feedbacks.unshift(feedback);
        
        // Save to localStorage
        saveFeedbacks();
        
        // Update display
        updatePreviousFeedback();
        
        // Reset form
        document.getElementById('orderFeedback').value = '';
        document.getElementById('selectOrder').value = '';
        resetStarRating('foodQualityRating');
        resetStarRating('deliveryRating');
        
        // Show success message
        alert('Thank you for your feedback!');
    }

    // Reset star rating for a container
    function resetStarRating(containerId) {
        const container = document.getElementById(containerId);
        if (!container) return;
        
        const stars = container.querySelectorAll('.star');
        stars.forEach(star => {
            star.classList.remove('active');
            star.innerHTML = '<i class="far fa-star"></i>';
        });
    }

    // Generate unique feedback ID
    function generateFeedbackId() {
        return Math.floor(10000 + Math.random() * 90000);
    }

    // Update previous feedback display with compact design
function updatePreviousFeedback() {
    const container = document.getElementById('previousFeedback');
    if (!container) return;
    
    container.innerHTML = '';
    
    if (appState.feedbacks.length === 0) {
        container.innerHTML = `
            <div class="no-feedback compact">
                <i class="fas fa-comment-alt text-2xl text-gray-600 mb-2"></i>
                <h3 class="text-sm font-bold text-gray-400 mb-1">No Feedback Yet</h3>
                <p class="text-gray-500 text-xs">You haven't submitted any feedback yet.</p>
            </div>
        `;
        return;
    }
    
    // Sort feedbacks by date (newest first)
    const sortedFeedbacks = [...appState.feedbacks].sort((a, b) => 
        new Date(b.date) - new Date(a.date)
    );
    
    sortedFeedbacks.forEach(feedback => {
        const feedbackDate = new Date(feedback.date);
        const formattedDate = feedbackDate.toLocaleDateString('en-US', { 
            month: 'short', 
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit'
        });
        
        const feedbackCard = document.createElement('div');
        feedbackCard.className = 'feedback-card compact';
        
        let ratingHTML = '';
        if (feedback.type === 'overall') {
            ratingHTML = `
                <div class="feedback-rating compact">
                    ${generateStarRatingHTML(feedback.rating)}
                    <span class="text-xs text-gray-400 ml-2">Overall</span>
                </div>
            `;
        } else {
            ratingHTML = `
                <div class="grid grid-cols-2 gap-2 mb-1">
                    <div>
                        <p class="text-xs font-semibold text-gray-400">Food</p>
                        <div class="feedback-rating compact">
                            ${generateStarRatingHTML(feedback.foodRating)}
                        </div>
                    </div>
                    <div>
                        <p class="text-xs font-semibold text-gray-400">Delivery</p>
                        <div class="feedback-rating compact">
                            ${generateStarRatingHTML(feedback.deliveryRating)}
                        </div>
                    </div>
                </div>
                <p class="text-xs text-gray-400 mb-1">Order #${feedback.orderId}</p>
            `;
        }
        
        feedbackCard.innerHTML = `
            <div class="feedback-header compact">
                <div class="feedback-user compact">
                    <div class="user-avatar compact">
                        ${feedback.user.name.charAt(0).toUpperCase()}
                    </div>
                    <div>
                        <p class="font-semibold text-sm">${feedback.user.name}</p>
                        <p class="feedback-date compact">${formattedDate}</p>
                    </div>
                </div>
                <span class="px-2 py-1 bg-blue-800 bg-opacity-30 text-cyan-300 rounded text-xs font-semibold">
                    ${feedback.type === 'overall' ? 'Overall' : 'Order'}
                </span>
            </div>
            ${ratingHTML}
            <div class="feedback-content compact">
                <p>${feedback.comment}</p>
            </div>
            <div class="feedback-actions compact">
                <button class="feedback-action-btn compact" data-id="${feedback.id}">
                    <i class="fas fa-thumbs-up"></i> Helpful
                </button>
                <button class="feedback-action-btn compact" data-id="${feedback.id}">
                    <i class="fas fa-flag"></i> Report
                </button>
            </div>
        `;
        
        container.appendChild(feedbackCard);
    });
}

    // Generate star rating HTML for feedback display
    function generateStarRatingHTML(rating) {
        let stars = '';
        for (let i = 0; i < 5; i++) {
            if (i < rating) {
                stars += '<i class="fas fa-star text-yellow-400"></i>';
            } else {
                stars += '<i class="far fa-star text-gray-400"></i>';
            }
        }
        return stars;
    }

    // Populate order dropdown for feedback
    function populateOrderFeedbackDropdown() {
        const dropdown = document.getElementById('selectOrder');
        if (!dropdown) return;
        
        dropdown.innerHTML = '<option value="">Choose an order to rate</option>';
        
        // Only show delivered orders for feedback
        const deliveredOrders = appState.orders.filter(order => 
            order.status === 'delivered'
        );
        
        if (deliveredOrders.length === 0) {
            dropdown.innerHTML += '<option value="" disabled>No delivered orders available for feedback</option>';
        } else {
            deliveredOrders.forEach(order => {
                const option = document.createElement('option');
                option.value = order.id;
                option.textContent = `Order #${order.id} - ${new Date(order.date).toLocaleDateString()} - ${order.total.toFixed(2)}`;
                dropdown.appendChild(option);
            });
        }
    }

    // Set up desktop navigation
    function setupDesktopNavigation() {
        const desktopNavItems = document.querySelectorAll('.desktop-nav-item');
        
        desktopNavItems.forEach(item => {
            item.addEventListener('click', function() {
                const section = this.getAttribute('data-section');
                
                // Remove active class from all items
                desktopNavItems.forEach(navItem => {
                    navItem.classList.remove('active');
                });
                
                // Add active class to clicked item
                this.classList.add('active');
                
                // Show the selected section
                showSection(section);
            });
        });
    }

    // Set up welcome message variations
    function setupWelcomeMessages() {
        const welcomeMessages = [
            "Welcome back, {name}!",
            "Hungry again, {name}?",
            "Your cravings are calling, {name}!",
            "Ready for delicious seafood, {name}?",
            "Good to see you, {name}!"
        ];
        
        const welcomeElement = document.getElementById('welcomeMessage');
        if (welcomeElement) {
            const randomMessage = welcomeMessages[Math.floor(Math.random() * welcomeMessages.length)];
            welcomeElement.textContent = randomMessage.replace('{name}', appState.currentUser.name.split(' ')[0]);
        }
    }

    // Set up payment method selection
    function setupPaymentMethods() {
        const paymentOptions = document.querySelectorAll('.payment-option');
        paymentOptions.forEach(option => {
            option.addEventListener('click', function() {
                // Remove selected class from all options
                paymentOptions.forEach(opt => opt.classList.remove('selected'));
                
                // Add selected class to clicked option
                this.classList.add('selected');
                
                // Show payment details based on selected method
                const method = this.getAttribute('data-method');
                showPaymentDetails(method);
            });
        });
        
        // Select cash by default
        document.querySelector('.payment-option[data-method="cash"]').classList.add('selected');
        showPaymentDetails('cash');
    }

    // Show payment details based on selected method
    function showPaymentDetails(method) {
        const paymentDetails = document.getElementById('paymentDetails');
        
        switch(method) {
            case 'cash':
                paymentDetails.innerHTML = `
                    <div class="payment-method active">
                        <h4 class="font-semibold text-cyan-300 mb-2">Cash on Delivery</h4>
                        <p class="text-sm text-gray-300">Pay with cash when your order arrives. Please have exact change ready.</p>
                        <div class="mt-2 p-2 bg-blue-900 bg-opacity-20 rounded">
                            <p class="text-xs text-cyan-300 font-semibold">Note:</p>
                            <p class="text-xs text-gray-300">Delivery fee is calculated based on your location.</p>
                        </div>
                    </div>
                `;
                break;
                
            case 'gcash':
                paymentDetails.innerHTML = `
                    <div class="payment-method active">
                        <h4 class="font-semibold text-cyan-300 mb-2">GCash Payment</h4>
                        <p class="text-sm text-gray-300 mb-2">Send payment to our GCash number:</p>
                        <div class="bg-blue-900 bg-opacity-20 p-2 rounded mb-2">
                            <p class="text-center font-bold text-base">0917 123 4567</p>
                            <p class="text-center text-xs text-gray-300">CoastCrave Seafood PH</p>
                        </div>
                        <div class="form-group">
                            <label for="gcashNumber">Your GCash Number</label>
                            <input type="tel" id="gcashNumber" class="form-control" placeholder="09XX XXX XXXX" required>
                        </div>
                        <div class="form-group">
                            <label for="gcashReference">GCash Reference Number</label>
                            <input type="text" id="gcashReference" class="form-control" placeholder="Enter transaction reference" required>
                        </div>
                        <div class="mt-2 p-2 bg-blue-900 bg-opacity-20 rounded">
                            <p class="text-xs text-cyan-300 font-semibold">Important:</p>
                            <p class="text-xs text-gray-300">Please send the exact amount and include your order number in the message.</p>
                        </div>
                    </div>
                `;
                break;
                
            case 'card':
                paymentDetails.innerHTML = `
                    <div class="payment-method active">
                        <h4 class="font-semibold text-cyan-300 mb-2">Card Payment</h4>
                        <div class="form-group">
                            <label for="cardNumber">Card Number</label>
                            <input type="text" id="cardNumber" class="form-control" placeholder="1234 5678 9012 3456" required>
                        </div>
                        <div class="grid grid-cols-2 gap-2">
                            <div class="form-group">
                                <label for="cardExpiry">Expiry Date</label>
                                <input type="text" id="cardExpiry" class="form-control" placeholder="MM/YY" required>
                            </div>
                            <div class="form-group">
                                <label for="cardCVC">CVC</label>
                                <input type="text" id="cardCVC" class="form-control" placeholder="123" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="cardName">Name on Card</label>
                            <input type="text" id="cardName" class="form-control" placeholder="John Doe" required>
                        </div>
                        <div class="mt-2 p-2 bg-blue-900 bg-opacity-20 rounded">
                            <p class="text-xs text-cyan-300 font-semibold">Secure Payment:</p>
                            <p class="text-xs text-gray-300">Your payment information is encrypted and secure.</p>
                        </div>
                    </div>
                `;
                break;
        }
    }

    // Get selected payment method
    function getSelectedPaymentMethod() {
        const selectedOption = document.querySelector('.payment-option.selected');
        return selectedOption ? selectedOption.getAttribute('data-method') : 'cash';
    }

    // Validate payment details based on method
    function validatePaymentDetails(method) {
        switch(method) {
            case 'cash':
                return true; // No validation needed for cash
                
            case 'gcash':
                const gcashNumber = document.getElementById('gcashNumber').value;
                const gcashReference = document.getElementById('gcashReference').value;
                
                if (!gcashNumber || !gcashReference) {
                    alert('Please fill in all GCash payment details.');
                    return false;
                }
                
                // Simple phone number validation
                if (!/^09\d{9}$/.test(gcashNumber.replace(/\s/g, ''))) {
                    alert('Please enter a valid GCash number (09XXXXXXXXX).');
                    return false;
                }
                
                return true;
                
            case 'card':
                const cardNumber = document.getElementById('cardNumber').value;
                const cardExpiry = document.getElementById('cardExpiry').value;
                const cardCVC = document.getElementById('cardCVC').value;
                const cardName = document.getElementById('cardName').value;
                
                if (!cardNumber || !cardExpiry || !cardCVC || !cardName) {
                    alert('Please fill in all card payment details.');
                    return false;
                }
                
                // Simple card number validation (just checking if it's 16 digits)
                if (!/^\d{16}$/.test(cardNumber.replace(/\s/g, ''))) {
                    alert('Please enter a valid 16-digit card number.');
                    return false;
                }
                
                // Simple expiry date validation
                if (!/^\d{2}\/\d{2}$/.test(cardExpiry)) {
                    alert('Please enter a valid expiry date (MM/YY).');
                    return false;
                }
                
                // Simple CVC validation
                if (!/^\d{3,4}$/.test(cardCVC)) {
                    alert('Please enter a valid CVC (3 or 4 digits).');
                    return false;
                }
                
                return true;
        }
        
        return false;
    }

    // Get payment method display name
    function getPaymentMethodDisplayName(method) {
        switch(method) {
            case 'cash': return 'Cash on Delivery';
            case 'gcash': return 'GCash';
            case 'card': return 'Credit/Debit Card';
            default: return 'Cash on Delivery';
        }
    }

    // Load user orders from localStorage - ONLY FROM CUSTOMERORDERS
    function loadUserOrders() {
        try {
            const savedOrders = localStorage.getItem('customerOrders');
            if (savedOrders) {
                const allOrders = JSON.parse(savedOrders);
                
                // Filter orders to only show current user's orders
                const userOrders = allOrders.filter(order => 
                    order.customer && order.customer.email === appState.currentUser.email
                );
                
                appState.orders = userOrders.map(order => ({
                    ...order,
                    customer: {...order.customer},
                    items: order.items.map(item => ({...item}))
                }));
                
                console.log('Loaded user orders from customerOrders:', appState.orders.length);
            } else {
                // If no orders in localStorage, start with empty array
                appState.orders = [];
                localStorage.setItem('customerOrders', JSON.stringify([]));
            }
        } catch (error) {
            console.error('Error loading orders:', error);
            appState.orders = [];
        }
    }

    // Load menu items from localStorage
    function loadMenuItemsFromStorage() {
        try {
            const savedMenuItems = localStorage.getItem('menuItems');
            if (savedMenuItems) {
                appState.menuItems = JSON.parse(savedMenuItems);
            } else {
                // If no items in localStorage, use the specified menu items
                appState.menuItems = [
                // Fish Dishes
                 {
                        id: 1,
                        name: "Grilled Salmon",
                        description: "A flaky, moist, and juicy fish with a slightly smoky flavor and a charred exterior, achieved by cooking it directly on a grill.",
                        price: 250,
                        category: "fish",
                        image: "grilled salmon.png",
                        rating: 4.8,
                        badge: "top-pick" // Top pick badge
                    },
                    {
                        id: 2,
                        name: "Salmon Teriyaki",
                        description: "Sweet and savory Japanese-style grilled salmon.",
                        price: 270,
                        category: "fish",
                        image: "salmon teriyaki.jpg",
                        rating: 4.7
                    },
                    {
                        id: 3,
                        name: "Fish and Chips",
                        description: "Crispy battered cream dory served with fries and tartar sauce.",
                        price: 180,
                        category: "fish",
                        image: "freepik__the-style-is-candid-image-photography-with-natural__19046.png",
                        rating: 4.5
                    },
                    {
                        id: 4,
                        name: "Bangus Sisig (Milkfish Sisig)",
                        description: "Sizzling boneless bangus flakes tossed in spicy mayo.",
                        price: 120,
                        category: "fish",
                        image: "milkfish sisig.jpg",
                        rating: 4.6,
                        badge: "fresh" // Freshly added badge
                    },
                    // Shellfish Dishes
                    {
                        id: 5,
                        name: "Baked Tahong (Mussels with Cheese)",
                        description: "Oven-baked mussels topped with creamy garlic butter and melted cheese.",
                        price: 180,
                        category: "shellfish",
                        image: "Baked Mussels with cheese.jpg",
                        rating: 4.4,
                        badge: "top-pick" // Top pick badge
                    },
                    {
                        id: 6,
                        name: "Garlic Butter Clams",
                        description: "Fresh local clams sauted in butter and garlic sauce.",
                        price: 150,
                        category: "shellfish",
                        image: "buttered garlic clams.jpg",
                        rating: 4.3
                    },
                    {
                        id: 7,
                        name: "Steamed Oysters with Ginger & Soy",
                        description: "Lightly steamed oysters in savory ginger-soy dressing.",
                        price: 180,
                        category: "shellfish",
                        image: "Steamed Oysters with Ginger and Soy Sauce.jpg",
                        rating: 4.5,
                        badge: "fresh" // Freshly added badge
                    },
                    {
                        id: 8,
                        name: "Spicy Scallops in Cream Sauce",
                        description: "Tender scallops in a rich, spicy cream sauce.",
                        price: 200,
                        category: "shellfish",
                        image: "spicy scallops in cream cheese.jpg",
                        rating: 4.7
                    },
                    // Soups & Stews
                    {
                        id: 9,
                        name: "Sinigang na Hipon",
                        description: "Filipino sour soup with shrimp, kangkong, and radish.",
                        price: 150,
                        category: "soups",
                        image: "Sinigang na Hipon.jpg",
                        rating: 4.6,
                        badge: "top-pick" // Top pick badge
                    },
                    {
                        id: 10,
                        name: "Seafood Kare-Kare",
                        description: "Creamy peanut stew with shrimp, squid, and vegetables.",
                        price: 200,
                        category: "soups",
                        image: "Seafood Kare-Kare.jpg",
                        rating: 4.5
                    },
                    {
                        id: 11,
                        name: "Bouillabaisse",
                        description: "Hearty seafood stew with fish, clams, and shrimp.",
                        price: 220,
                        category: "soups",
                        image: "Bouillabaisse (Seafood Stew).jpg",
                        rating: 4.7
                    },
                    {
                        id: 12,
                        name: "Ginataang Alimasag",
                        description: "A Filipino seafood dish where blue crabs are steamed and simmered in spiced coconut milk with string beans and squash.",
                        price: 250,
                        category: "soups",
                        image: "Ginataang Alimasag.jpg",
                        rating: 4.8,
                        badge: "fresh" // Freshly added badge
                    },
                    // Squids
                    {
                        id: 13,
                        name: "Calamares (Fried Squid Rings)",
                        description: "Filipino favorite crispy golden squid rings.",
                        price: 120,
                        category: "squids",
                        image: "Calamares (Fried Squid Rings).jpg",
                        rating: 4.4,
                        badge: "top-pick" // Top pick badge
                    },
                    {
                        id: 14,
                        name: "Adobong Pusit (Squid Adobo)",
                        description: "Squid simmered in soy sauce, vinegar, and garlic.",
                        price: 180,
                        category: "squids",
                        image: "adobong pusit.jpg",
                        rating: 4.6
                    },
                    {
                        id: 15,
                        name: "Grilled Stuffed Squid",
                        description: "Squid stuffed with tomatoes, onions, and herbs.",
                        price: 160,
                        category: "squids",
                        image: "Grilled Stuffed Squid.png",
                        rating: 4.5
                    },
                    {
                        id: 16,
                        name: "Squid in Veggies and Oyster Sauce",
                        description: "Stir-fried squid with vegetables and oyster sauce.",
                        price: 140,
                        category: "squids",
                        image: "Squid in Veggies and Oyster Sauce.jpg",
                        rating: 4.3,
                        badge: "fresh" // Freshly added badge
                    },
                    // Sauces
                    {
                        id: 17,
                        name: "Garlic Butter Sauce",
                        description: "Rich, creamy blend of butter and roasted garlic.",
                        price: 30,
                        category: "sauces",
                        image: "Garlic Butter Sauce.png",
                        rating: 4.5,
                        badge: "top-pick" // Top pick badge
                    },
                    {
                        id: 18,
                        name: "Sweet Chili Sauce",
                        description: "Sweet and mildly spicy dipping sauce.",
                        price: 30,
                        category: "sauces",
                        image: "Sweet Chili Sauce.jpg",
                        rating: 4.3
                    },
                    {
                        id: 19,
                        name: "Soy-Calamansi Sauce",
                        description: "Classic Filipino soy sauce with calamansi and chili.",
                        price: 25,
                        category: "sauces",
                        image: "Soy-Calamansi Sauce.png",
                        rating: 4.6
                    },
                    {
                        id: 20,
                        name: "Spicy Vinegar Dip",
                        description: "Local suka with chili, garlic, and onion for a kick.",
                        price: 20,
                        category: "sauces",
                        image: "Spicy Vinegar Dip.png",
                        rating: 4.4,
                        badge: "fresh" // Freshly added badge
                    },
                    {
                        id: 21,
                        name: "Tartar Sauce",
                        description: "Creamy mayo-based sauce with pickles and herbs.",
                        price: 30,
                        category: "sauces",
                        image: "tartar sauce.jpg",
                        rating: 4.3
                    },
                    {
                        id: 22,
                        name: "Oyster Sauce Glaze",
                        description: "Thick, savory-sweet Chinese-style oyster blend.",
                        price: 25,
                        category: "sauces",
                        image: "oyster sauce glaze.jpg",
                        rating: 4.4
                    },
                    {
                        id: 23,
                        name: "Cheese Sauce",
                        description: "Melted creamy cheese perfect for topping baked dishes.",
                        price: 35,
                        category: "sauces",
                        image: "cheese sauce.jpg",
                        rating: 4.6
                    },
                    {
                        id: 24,
                        name: "Coconut Curry Sauce",
                        description: "Creamy coconut-based curry with mild spice.",
                        price: 40,
                        category: "sauces",
                        image: "coconut curry sauce.jpg",
                        rating: 4.7,
                        badge: "fresh" // Freshly added badge
                    }
            ];
                
                // Save default items to localStorage
                localStorage.setItem('menuItems', JSON.stringify(appState.menuItems));
            }
        
            // Only show active items to customers
            appState.menuItems = appState.menuItems.filter(item => item.status !== 'inactive');
            
            // Load the menu display
            loadMenuItems();
            
        } catch (error) {
            console.error('Error loading menu items:', error);
            // Fallback to default items if there's an error
            loadMenuItems();
        }
    }

    // Load menu items from appState
    function loadMenuItems(category = 'all') {
        const menuContainer = document.getElementById('menuItems');
        menuContainer.innerHTML = '';
        
        // Filter by category and ensure only active items are shown
        const filteredItems = category === 'all' 
            ? appState.menuItems.filter(item => item.status !== 'inactive')
            : appState.menuItems.filter(item => item.category === category && item.status !== 'inactive');
        
        if (filteredItems.length === 0) {
            menuContainer.innerHTML = '<p class="text-center col-span-3 py-8 text-gray-400">No menu items found in this category.</p>';
            return;
        }
        
        filteredItems.forEach(item => {
            const menuItem = document.createElement('div');
            menuItem.className = 'menu-item bg-blue-900 bg-opacity-20 rounded-lg overflow-hidden shadow-lg border border-blue-700 transition duration-300 hover-zoom';
            
            // Use a default image if the image path is invalid
            const imagePath = item.image || 'default-food.jpg';
            
            // Generate badge HTML if item has a badge
            let badgeHTML = '';
            if (item.badge === 'top-pick') {
                badgeHTML = '<div class="menu-badge top-pick-badge"><i class="fas fa-crown mr-1"></i>Top Picks</div>';
            } else if (item.badge === 'fresh') {
                badgeHTML = '<div class="menu-badge fresh-badge"><i class="fas fa-leaf mr-1"></i>Freshly Added</div>';
            }
            
            menuItem.innerHTML = `
                <div class="menu-img-container">
                    <div class="menu-img h-40 md:h-48 bg-cover bg-center" style="background-image: url('${imagePath}'); background-color: #1e293b;">
                        ${!item.image ? '<div class="w-full h-full flex items-center justify-center text-gray-400"><i class="fas fa-utensils text-4xl"></i></div>' : ''}
                    </div>
                    ${badgeHTML}
                </div>
                <div class="menu-content p-3 md:p-4">
                    <div class="menu-title flex justify-between mb-2">
                        <h3 class="text-base md:text-lg font-bold text-cyan-300">${item.name}</h3>
                        <span class="menu-price text-red-400 font-bold text-sm md:text-base">${item.price}</span>
                    </div>
                    <p class="menu-desc text-gray-300 text-xs md:text-sm mb-3 md:mb-4 line-clamp-2">${item.description}</p>
                    <div class="menu-footer flex justify-between items-center">
                        <div class="rating text-yellow-400 text-sm">
                            ${generateStarRating(item.rating)}
                        </div>
                        <button class="add-to-cart bg-cyan-400 hover:bg-cyan-300 text-gray-900 px-3 py-1 md:px-4 md:py-2 rounded-full font-semibold transition text-sm md:text-base hover-glow" data-id="${item.id}">Add to Cart</button>
                    </div>
                </div>
            `;
            menuContainer.appendChild(menuItem);
        });
        
        // Set up add to cart buttons
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', function() {
                const itemId = parseInt(this.getAttribute('data-id'));
                addToCart(itemId);
            });
        });
    }

    // Generate star rating HTML
    function generateStarRating(rating) {
        let stars = '';
        const fullStars = Math.floor(rating);
        const hasHalfStar = rating % 1 !== 0;
        
        for (let i = 0; i < fullStars; i++) {
            stars += '<i class="fas fa-star"></i>';
        }
        
        if (hasHalfStar) {
            stars += '<i class="fas fa-star-half-alt"></i>';
        }
        
        const emptyStars = 5 - Math.ceil(rating);
        for (let i = 0; i < emptyStars; i++) {
            stars += '<i class="far fa-star"></i>';
        }
        
        return stars;
    }

    // Enhanced Order History Filtering
    function setupOrderHistoryFilters() {
        const filterButtons = document.querySelectorAll('.filter-order-btn');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Remove active class from all buttons
                filterButtons.forEach(btn => btn.classList.remove('active'));
                // Add active class to clicked button
                this.classList.add('active');
                
                const status = this.getAttribute('data-status');
                filterOrderHistory(status);
            });
        });
    }

    // Filter order history by status
    function filterOrderHistory(statusFilter = 'all') {
        const orderHistoryContainer = document.getElementById('orderHistory');
        orderHistoryContainer.innerHTML = '';
        
        let filteredOrders = appState.orders;
        
        if (statusFilter !== 'all') {
            filteredOrders = appState.orders.filter(order => order.status === statusFilter);
        }
        
        // Apply date filter if set
        filteredOrders = filterOrdersByDate(filteredOrders);
        
        // Sort orders by date (newest first)
        filteredOrders.sort((a, b) => new Date(b.date) - new Date(a.date));
        
        if (filteredOrders.length === 0) {
            orderHistoryContainer.innerHTML = `
                <div class="text-center py-8">
                    <i class="fas fa-history text-4xl text-gray-600 mb-4"></i>
                    <h3 class="text-xl font-bold text-gray-400 mb-2">No ${statusFilter === 'all' ? '' : statusFilter} orders found</h3>
                    <p class="text-gray-500">${statusFilter === 'all' ? 'You haven\'t placed any orders yet.' : `You don't have any ${statusFilter} orders.`}</p>
                    
                </div>
            `;
            return;
        }
        
        filteredOrders.forEach(order => {
            const orderDate = new Date(order.date);
            const formattedDate = orderDate.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const orderCard = document.createElement('div');
            orderCard.className = 'order-card';
            orderCard.innerHTML = `
                <div class="order-header">
                    <div>
                        <h3 class="text-lg font-bold text-cyan-300">Order #${order.id}</h3>
                        <p class="text-gray-400 text-sm">${formattedDate}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-lg font-bold">${order.total.toFixed(2)}</p>
                        <span class="order-status status-${order.status}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h4 class="font-semibold mb-2">Items:</h4>
                    <ul class="space-y-2">
                        ${order.items.map(item => `
                            <li class="flex justify-between">
                                <span>${item.name} x ${item.quantity}</span>
                                <span>${(item.price * item.quantity).toFixed(2)}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
                
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-sm text-gray-400">Payment: ${order.paymentMethod}</p>
                        ${order.specialInstructions ? `<p class="text-sm text-gray-400 mt-1">Instructions: ${order.specialInstructions}</p>` : ''}
                    </div>
                    <div class="flex gap-2">
                        ${order.status !== 'cancelled' && order.status !== 'delivered' ? `
                            <button class="track-btn text-sm" data-id="${order.id}">
                                <i class="fas fa-map-marker-alt mr-1"></i> Track
                            </button>
                        ` : ''}
                        <button class="reorder-btn text-sm hover-glow" data-id="${order.id}">
                            <i class="fas fa-redo mr-1"></i> Reorder
                        </button>
                    </div>
                </div>
            `;
            orderHistoryContainer.appendChild(orderCard);
        });
        
        // Set up track order buttons
        document.querySelectorAll('.track-btn').forEach(button => {
            button.addEventListener('click', function() {
                const orderId = this.getAttribute('data-id');
                showSection('track-order');
                document.getElementById('orderSearch').value = orderId;
                displayOrderTracking(orderId);
            });
        });
        
        // Set up reorder buttons
        document.querySelectorAll('.reorder-btn').forEach(button => {
            button.addEventListener('click', function() {
                const orderId = this.getAttribute('data-id');
                reorderItems(orderId);
            });
        });
    }

    // Update the updateOrderHistory function to use the new filtering
    function updateOrderHistory(statusFilter = 'all') {
        filterOrderHistory(statusFilter);
    }
// Add this function to create and show the notification
function showReferFriendNotification() {
    // Create notification container if it doesn't exist
    let notification = document.getElementById('referFriendNotification');
    
    if (!notification) {
        notification = document.createElement('div');
        notification.id = 'referFriendNotification';
        notification.className = 'notification-container';
        notification.innerHTML = `
            <div class="notification">
                <button class="notification-close" id="closeReferNotification">
                    <i class="fas fa-times"></i>
                </button>
                <div class="notification-header">
                    <div class="notification-icon text-purple-500">
                        <i class="fas fa-gift"></i>
                    </div>
                    <div class="notification-title">Coming Soon</div>
                </div>
                <div class="notification-body">
                    <div class="notification-message">
                        This feature will be included in upcoming updates. We appreciate your understanding.
                    </div>
                    <div class="notification-actions">
                        <button class="notification-btn notification-btn-primary" id="okReferNotification">
                            OK
                        </button>
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(notification);
        
        // Set up event listeners for the new notification
        document.getElementById('closeReferNotification').addEventListener('click', function() {
            notification.classList.remove('show');
        });
        
        document.getElementById('okReferNotification').addEventListener('click', function() {
            notification.classList.remove('show');
        });
        
        // Close notification when clicking outside
        notification.addEventListener('click', function(e) {
            if (e.target === notification) {
                notification.classList.remove('show');
            }
        });
    }
    
    // Show the notification
    notification.classList.add('show');
}
    // Set up event listeners
    function setupEventListeners() {
        // Mobile menu toggle
        mobileMenuToggle.addEventListener('click', toggleMobileMenu);
        mobileOverlay.addEventListener('click', closeMobileMenu);
        
        // Close mobile menu when clicking on sidebar links
        document.querySelectorAll('.sidebar-menu a').forEach(link => {
            link.addEventListener('click', closeMobileMenu);
        });
        
         // Refer a Friend button
    const referFriendBtn = document.querySelector('.bg-gradient-to-r.from-purple-500.to-pink-500');
    if (referFriendBtn) {
        referFriendBtn.addEventListener('click', function(e) {
            e.preventDefault();
            showReferFriendNotification();
        });
    }
        // Dashboard navigation
        document.querySelectorAll('.sidebar-menu a, .dashboard-quick-action').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const section = this.getAttribute('data-section');
                if (section) {
                    showSection(section);
                    
                    // Update active state in sidebar
                    document.querySelectorAll('.sidebar-menu a').forEach(item => {
                        item.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // Update active state in desktop nav
                    document.querySelectorAll('.desktop-nav-item').forEach(item => {
                        item.classList.remove('active');
                        if (item.getAttribute('data-section') === section) {
                            item.classList.add('active');
                        }
                    });
                }
            });
        });
        
        // Cart icon click
        document.getElementById('cartIcon').addEventListener('click', function() {
            showSection('cart');
            
            // Update active state in desktop nav
            document.querySelectorAll('.desktop-nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-section') === 'cart') {
                    item.classList.add('active');
                }
            });
        });

         // NEW: Back to Cart button in checkout modal
    document.getElementById('backToCartBtn').addEventListener('click', function() {
        checkoutModal.style.display = 'none';
        showSection('cart');
    });
        
        // Logout - UPDATED TO SHOW CONFIRMATION
        document.getElementById('logoutBtn').addEventListener('click', function(e) {
            e.preventDefault();
            showLogoutConfirmation();
        });
        document.getElementById('sidebarLogout').addEventListener('click', function(e) {
            e.preventDefault();
            showLogoutConfirmation();
        });
        
        // Checkout
        document.getElementById('checkoutBtn').addEventListener('click', openCheckout);
        
        // Form submissions
        document.getElementById('checkoutForm').addEventListener('submit', handleCheckout);
        
        // Close modals
        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', closeAllModals);
        });
        
        document.getElementById('closeOrderModal').addEventListener('click', closeOrderConfirmation);
        
        // Filter buttons
        document.querySelectorAll('.filter-btn').forEach(button => {
            button.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                const category = this.getAttribute('data-category');
                loadMenuItems(category);
            });
        });
        
        // Close mobile menu on window resize if it becomes desktop
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                closeMobileMenu();
            }
        });
    }

    // Handle logout - UPDATED TO SHOW CONFIRMATION
    function handleLogout(e) {
        e.preventDefault();
        showLogoutConfirmation();
    }

    // Mobile menu functions
    function toggleMobileMenu() {
        dashboardSidebar.classList.toggle('mobile-open');
        mobileOverlay.classList.toggle('active');
        document.body.style.overflow = dashboardSidebar.classList.contains('mobile-open') ? 'hidden' : '';
    }

    function closeMobileMenu() {
        dashboardSidebar.classList.remove('mobile-open');
        mobileOverlay.classList.remove('active');
        document.body.style.overflow = '';
    }

    // Update UI based on authentication status
    function updateUIForAuth() {
        if (appState.currentUser) {
            document.getElementById('userName').textContent = appState.currentUser.name;
            document.getElementById('dropdownUserName').textContent = appState.currentUser.name;
            document.getElementById('dropdownUserEmail').textContent = appState.currentUser.email;
            document.getElementById('welcomeUserName').textContent = appState.currentUser.name;
            
            // Pre-fill checkout form with user info
            document.getElementById('checkoutName').value = appState.currentUser.name;
            document.getElementById('checkoutAddress').value = '';
            document.getElementById('checkoutPhone').value = '+63 912 345 6789';
        }
    }

    // Show specific dashboard section
    function showSection(sectionId) {
        // Hide all sections
        document.querySelectorAll('.dashboard-section').forEach(section => {
            section.classList.remove('active');
        });
        
        // Show selected section
        document.getElementById(`${sectionId}-section`).classList.add('active');
        
        // Special handling for cart section
        if (sectionId === 'cart') {
            updateCartSection();
        }
        
        // Refresh menu items when navigating to menu section
        if (sectionId === 'menu') {
            loadMenuItemsFromStorage();
        }
        
        // Refresh order history when navigating to order history section
        if (sectionId === 'order-history') {
            updateOrderHistory();
        }
        
        // Refresh feedback when navigating to feedback section
        if (sectionId === 'feedback') {
            updatePreviousFeedback();
            populateOrderFeedbackDropdown();
        }
        
        // Close mobile menu on section change
        closeMobileMenu();
    }

    // Update cart count display
    function updateCartCount() {
        const cartCount = appState.cart.reduce((total, item) => total + item.quantity, 0);
        document.querySelector('.cart-count').textContent = cartCount;
        document.querySelector('.cart-count-sidebar').textContent = cartCount;
        document.querySelector('.cart-count-desktop').textContent = cartCount;
    }

    // Display order tracking information - SEPARATED TIMELINE AND DELIVERY INFO WITH FUNCTIONAL BUTTONS
function displayOrderTracking(orderId) {
    const order = appState.orders.find(o => o.id.toString() === orderId.toString());
    if (!order) {
        const trackingContainer = document.getElementById('orderTrackingDetails');
        trackingContainer.innerHTML = `
            <div class="text-center py-6 md:py-8">
                <i class="fas fa-exclamation-triangle text-4xl md:text-5xl text-yellow-500 mb-3 md:mb-4"></i>
                <h3 class="text-lg md:text-xl font-bold text-gray-400">Order Not Found</h3>
                <p class="text-gray-500 mt-2 text-sm md:text-base">No order found with ID: ${orderId}. Please check the order ID and try again.</p>
            </div>
        `;
        return;
    }
    
    const trackingContainer = document.getElementById('orderTrackingDetails');
    
    // Calculate progress based on status
    let progressPercentage = 0;
    let activeStep = 0;
    
    const statusSteps = ['pending', 'confirmed', 'preparing', 'out-for-delivery', 'delivered'];
    const statusIndex = statusSteps.indexOf(order.status);
    
    if (statusIndex >= 0) {
        progressPercentage = (statusIndex / (statusSteps.length - 1)) * 100;
        activeStep = statusIndex;
    }
    
    // Create realistic timeline with accurate timestamps
    const orderDate = new Date(order.date);
    const timelineEvents = [];
    
    // Add events based on order status
    timelineEvents.push({
        icon: 'fa-shopping-cart',
        title: 'Order placed',
        time: orderDate,
        description: 'Your order has been successfully placed and is awaiting confirmation.'
    });
    
    if (order.status !== 'pending') {
        const confirmedTime = new Date(orderDate.getTime() + 5 * 60000); // 5 minutes after order
        timelineEvents.push({
            icon: 'fa-check-circle',
            title: 'Order confirmed',
            time: confirmedTime,
            description: 'We\'ve received your order and payment. Estimated delivery time is 45 minutes.'
        });
    }
    
    if (order.status === 'preparing' || order.status === 'out-for-delivery' || order.status === 'delivered') {
        const preparingTime = new Date(orderDate.getTime() + 10 * 60000); // 10 minutes after order
        timelineEvents.push({
            icon: 'fa-utensils',
            title: 'Order is being prepared',
            time: preparingTime,
            description: 'Our chefs are now preparing your delicious seafood meal.'
        });
    }
    
    if (order.status === 'out-for-delivery' || order.status === 'delivered') {
        const outForDeliveryTime = new Date(orderDate.getTime() + 25 * 60000); // 25 minutes after order
        timelineEvents.push({
            icon: 'fa-motorcycle',
            title: 'Order is out for delivery',
            time: outForDeliveryTime,
            description: 'Your order is on its way! Our delivery rider will arrive in approximately 20 minutes.'
        });
    }
    
    if (order.status === 'delivered') {
        const deliveredTime = new Date(orderDate.getTime() + 45 * 60000); // 45 minutes after order
        timelineEvents.push({
            icon: 'fa-home',
            title: 'Order delivered',
            time: deliveredTime,
            description: 'Your order has been successfully delivered. Enjoy your meal!'
        });
    }
    
    // Sort timeline events by time (newest first)
    timelineEvents.sort((a, b) => new Date(b.time) - new Date(a.time));
    
    // Generate timeline HTML
    let timelineHTML = '';
    timelineEvents.forEach(event => {
        const eventTime = new Date(event.time);
        timelineHTML += `
            <div class="flex mb-4">
                <div class="mr-3 md:mr-4 text-cyan-400">
                    <i class="fas ${event.icon}"></i>
                </div>
                <div class="flex-1">
                    <p class="font-semibold text-sm md:text-base">${event.title}</p>
                    <p class="text-xs md:text-sm text-gray-400">${eventTime.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</p>
                    <p class="text-xs md:text-sm mt-1">${event.description}</p>
                </div>
            </div>
        `;
    });
    
    trackingContainer.innerHTML = `
        <!-- Order Header -->
        <div class="mb-6 md:mb-8 bg-blue-800 bg-opacity-30 rounded-lg p-4 md:p-6">
            <h2 class="text-xl md:text-2xl font-bold text-cyan-300 mb-2">Order #${order.id}</h2>
            <p class="text-gray-400 text-sm md:text-base">Placed on ${orderDate.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            })}</p>
            <div class="mt-3 flex items-center">
                <span class="order-status status-${order.status} text-sm">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span>
                <span class="ml-4 text-sm text-gray-400">Total: ${order.total.toFixed(2)}</span>
            </div>
        </div>

        <!-- SEPARATED: Order Timeline and Delivery Information -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8">
            
            <!-- Order Timeline Card -->
            <div class="bg-blue-800 bg-opacity-20 rounded-lg p-4 md:p-6 border border-blue-700">
                <h3 class="text-lg md:text-xl font-bold text-cyan-300 mb-4 flex items-center">
                    <i class="fas fa-history mr-2"></i> Order Timeline
                </h3>
                
                <!-- Progress Bar -->
                <div class="mb-6">
                    <div class="flex justify-between text-sm mb-2">
                        <span class="text-cyan-300">Order Progress</span>
                        <span class="text-gray-400">${Math.round(progressPercentage)}% Complete</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2">
                        <div class="bg-cyan-400 h-2 rounded-full transition-all duration-500" style="width: ${progressPercentage}%"></div>
                    </div>
                </div>

                <!-- Timeline Steps -->
                <div class="tracking-progress mb-6">
                    <div class="tracking-progress-bar" style="width: ${progressPercentage}%;"></div>
                    <div class="tracking-step ${activeStep >= 0 ? 'completed' : ''}">
                        <div class="tracking-step-icon">
                            <i class="fas ${activeStep >= 0 ? 'fa-check' : 'fa-shopping-cart'}"></i>
                        </div>
                        <div class="tracking-step-label">Placed</div>
                    </div>
                    <div class="tracking-step ${activeStep >= 1 ? 'completed' : ''}">
                        <div class="tracking-step-icon">
                            <i class="fas ${activeStep >= 1 ? 'fa-check' : 'fa-check-circle'}"></i>
                        </div>
                        <div class="tracking-step-label">Confirmed</div>
                    </div>
                    <div class="tracking-step ${activeStep >= 2 ? 'completed' : ''}">
                        <div class="tracking-step-icon">
                            <i class="fas ${activeStep >= 2 ? 'fa-check' : 'fa-utensils'}"></i>
                        </div>
                        <div class="tracking-step-label">Preparing</div>
                    </div>
                    <div class="tracking-step ${activeStep >= 3 ? 'completed' : ''} ${activeStep === 3 ? 'active' : ''}">
                        <div class="tracking-step-icon">
                            <i class="fas ${activeStep >= 3 ? (activeStep === 3 ? 'fa-motorcycle' : 'fa-check') : 'fa-motorcycle'}"></i>
                        </div>
                        <div class="tracking-step-label">On the Way</div>
                    </div>
                    <div class="tracking-step ${activeStep >= 4 ? 'completed' : ''} ${activeStep === 4 ? 'active' : ''}">
                        <div class="tracking-step-icon">
                            <i class="fas ${activeStep >= 4 ? (activeStep === 4 ? 'fa-home' : 'fa-check') : 'fa-home'}"></i>
                        </div>
                        <div class="tracking-step-label">Delivered</div>
                    </div>
                </div>

                <!-- Detailed Timeline -->
                <div class="space-y-4 max-h-60 overflow-y-auto pr-2">
                    ${timelineHTML}
                </div>
            </div>

            <!-- Delivery Information Card -->
            <div class="bg-blue-800 bg-opacity-20 rounded-lg p-4 md:p-6 border border-blue-700">
                <h3 class="text-lg md:text-xl font-bold text-cyan-300 mb-4 flex items-center">
                    <i class="fas fa-truck mr-2"></i> Delivery Information
                </h3>

                <!-- Order Summary -->
                <div class="mb-6">
                    <h4 class="font-semibold text-cyan-300 mb-3">Order Summary</h4>
                    <div class="space-y-2 text-sm">
                        ${order.items.map(item => `
                            <div class="flex justify-between items-center py-2 border-b border-gray-700">
                                <div class="flex items-center">
                                    <div class="w-8 h-8 bg-cover bg-center rounded mr-3" style="background-image: url('${item.image}');"></div>
                                    <span>${item.name} x ${item.quantity}</span>
                                </div>
                                <span class="font-semibold">${(item.price * item.quantity).toFixed(2)}</span>
                            </div>
                        `).join('')}
                        <div class="flex justify-between pt-2 font-bold">
                            <span>Total</span>
                            <span class="text-cyan-300">${order.total.toFixed(2)}</span>
                        </div>
                    </div>
                </div>

                <!-- Delivery Details -->
                <div class="mb-6">
                    <h4 class="font-semibold text-cyan-300 mb-3">Delivery Details</h4>
                    <div class="space-y-3">
                        <div class="flex items-start">
                            <i class="fas fa-user mt-1 mr-3 text-cyan-400 text-sm"></i>
                            <div>
                                <p class="font-semibold text-sm">${order.customer.name}</p>
                                <p class="text-xs text-gray-400">Customer</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-map-marker-alt mt-1 mr-3 text-cyan-400 text-sm"></i>
                            <div>
                                <p class="font-semibold text-sm">${order.customer.address}</p>
                                <p class="text-xs text-gray-400">Delivery Address</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-phone mt-1 mr-3 text-cyan-400 text-sm"></i>
                            <div>
                                <p class="font-semibold text-sm">${order.customer.phone}</p>
                                <p class="text-xs text-gray-400">Contact Number</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-money-bill-wave mt-1 mr-3 text-cyan-400 text-sm"></i>
                            <div>
                                <p class="font-semibold text-sm">${order.paymentMethod}</p>
                                <p class="text-xs text-gray-400">Payment Method</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Special Instructions -->
                ${order.specialInstructions ? `
                    <div>
                        <h4 class="font-semibold text-cyan-300 mb-2">Special Instructions</h4>
                        <div class="bg-blue-900 bg-opacity-30 rounded p-3 text-sm">
                            <p>${order.specialInstructions}</p>
                        </div>
                    </div>
                ` : ''}

                <!-- Estimated Arrival -->
                ${order.status === 'out-for-delivery' ? `
                    <div class="mt-4 p-3 bg-green-900 bg-opacity-20 rounded-lg border border-green-700">
                        <div class="flex items-center">
                            <i class="fas fa-clock text-green-400 mr-2"></i>
                            <div>
                                <p class="font-semibold text-sm text-green-300">Estimated Arrival</p>
                                <p class="text-xs text-green-400">${new Date(Date.now() + 20 * 60 * 1000).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})} (About 20 minutes)</p>
                            </div>
                        </div>
                    </div>
                ` : ''}
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="mt-6 md:mt-8 flex flex-col sm:flex-row gap-3 justify-center">
            <button id="contactSupportBtn" class="bg-cyan-400 hover:bg-cyan-300 text-gray-900 px-4 py-2 rounded font-semibold transition flex items-center justify-center hover-glow">
                <i class="fas fa-phone-alt mr-2"></i> Contact Support
            </button>
            <button id="refreshStatusBtn" class="bg-transparent border border-cyan-400 text-cyan-400 hover:bg-cyan-400 hover:text-gray-900 px-4 py-2 rounded font-semibold transition flex items-center justify-center hover-glow">
                <i class="fas fa-redo mr-2"></i> Refresh Status
            </button>
            <button id="viewReceiptBtn" class="bg-transparent border border-green-400 text-green-400 hover:bg-green-400 hover:text-gray-900 px-4 py-2 rounded font-semibold transition flex items-center justify-center hover-glow">
                <i class="fas fa-receipt mr-2"></i> View Receipt
            </button>
        </div>
    `;
    
    // Add event listeners to the buttons
    setupTrackOrderButtons(order);
}

// Set up track order buttons functionality
function setupTrackOrderButtons(order) {
    // Contact Support Button
    document.getElementById('contactSupportBtn').addEventListener('click', function() {
        contactSupport(order);
    });
    
    // Refresh Status Button
    document.getElementById('refreshStatusBtn').addEventListener('click', function() {
        refreshOrderStatus(order.id);
    });
    
    // View Receipt Button
    document.getElementById('viewReceiptBtn').addEventListener('click', function() {
        viewOrderReceipt(order);
    });
}

// Contact Support Function
function contactSupport(order) {
    // Create a notification/modal for contact options
    const contactNotification = document.createElement('div');
    contactNotification.className = 'notification-container show';
    contactNotification.innerHTML = `
        <div class="notification">
            <button class="notification-close" id="closeContactNotification">
                <i class="fas fa-times"></i>
            </button>
            <div class="notification-header">
                <div class="notification-icon text-cyan-400">
                    <i class="fas fa-phone-alt"></i>
                </div>
                <div class="notification-title">Contact Support</div>
            </div>
            <div class="notification-body">
                <div class="notification-message">
                    <p class="mb-3">Need help with your order? Here are your options:</p>
                    <div class="space-y-3">
                        <div class="flex items-center p-2 bg-blue-900 bg-opacity-20 rounded">
                            <i class="fas fa-phone text-cyan-400 mr-3"></i>
                            <div>
                                <p class="font-semibold">Call Us</p>
                                <p class="text-sm text-gray-300">(043) 123-4567</p>
                            </div>
                        </div>
                        <div class="flex items-center p-2 bg-blue-900 bg-opacity-20 rounded">
                            <i class="fas fa-comment text-cyan-400 mr-3"></i>
                            <div>
                                <p class="font-semibold">Live Chat</p>
                                <p class="text-sm text-gray-300">Available 8:00 AM - 10:00 PM</p>
                            </div>
                        </div>
                        <div class="flex items-center p-2 bg-blue-900 bg-opacity-20 rounded">
                            <i class="fas fa-envelope text-cyan-400 mr-3"></i>
                            <div>
                                <p class="font-semibold">Email Support</p>
                                <p class="text-sm text-gray-300">support@coastcrave.com</p>
                            </div>
                        </div>
                    </div>
                    <p class="mt-3 text-sm text-gray-300">Reference: Order #${order.id}</p>
                </div>
                <div class="notification-actions">
                    <button class="notification-btn notification-btn-primary" id="closeContactModal">
                        Close
                    </button>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(contactNotification);
    
    // Set up close functionality
    document.getElementById('closeContactNotification').addEventListener('click', function() {
        contactNotification.remove();
    });
    
    document.getElementById('closeContactModal').addEventListener('click', function() {
        contactNotification.remove();
    });
    
    // Close when clicking outside
    contactNotification.addEventListener('click', function(e) {
        if (e.target === contactNotification) {
            contactNotification.remove();
        }
    });
}

// Refresh Order Status Function
function refreshOrderStatus(orderId) {
    const refreshBtn = document.getElementById('refreshStatusBtn');
    const originalText = refreshBtn.innerHTML;
    
    // Show loading state
    refreshBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Refreshing...';
    refreshBtn.disabled = true;
    
    // Simulate API call delay
    setTimeout(() => {
        // In a real app, this would make an API call to get updated status
        const order = appState.orders.find(o => o.id.toString() === orderId.toString());
        
        if (order) {
            // Simulate status progression for demo purposes
            const statuses = ['pending', 'confirmed', 'preparing', 'out-for-delivery', 'delivered'];
            const currentIndex = statuses.indexOf(order.status);
            
            if (currentIndex < statuses.length - 1) {
                // For demo: randomly progress status sometimes
                if (Math.random() > 0.7) {
                    order.status = statuses[currentIndex + 1];
                    
                    // Show success notification (centered like logout)
                    showRefreshNotification('success', 'Order Status Updated', `Order status has been updated to: ${order.status.charAt(0).toUpperCase() + order.status.slice(1)}`);
                    
                    // Refresh the display
                    displayOrderTracking(orderId);
                } else {
                    // Show no change notification
                    showRefreshNotification('info', 'Status Up to Date', 'Your order status is currently up to date.');
                    
                    // Reset button
                    refreshBtn.innerHTML = originalText;
                    refreshBtn.disabled = false;
                }
            } else {
                // Order is already delivered
                showRefreshNotification('info', 'Order Delivered', 'This order has been successfully delivered.');
                
                // Reset button
                refreshBtn.innerHTML = originalText;
                refreshBtn.disabled = false;
            }
        } else {
            // Reset button
            refreshBtn.innerHTML = originalText;
            refreshBtn.disabled = false;
        }
    }, 1500);
}

// Show Refresh Status Notification (Centered like logout)
function showRefreshNotification(type, title, message) {
    // Create notification container if it doesn't exist
    let notification = document.getElementById('refreshStatusNotification');
    
    if (!notification) {
        notification = document.createElement('div');
        notification.id = 'refreshStatusNotification';
        notification.className = 'notification-container';
        notification.innerHTML = `
            <div class="notification">
                <button class="notification-close" id="closeRefreshNotification">
                    <i class="fas fa-times"></i>
                </button>
                <div class="notification-header">
                    <div class="notification-icon" id="refreshNotificationIcon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="notification-title" id="refreshNotificationTitle">${title}</div>
                </div>
                <div class="notification-body">
                    <div class="notification-message" id="refreshNotificationMessage">
                        ${message}
                    </div>
                    <div class="notification-actions">
                        <button class="notification-btn notification-btn-primary" id="okRefreshNotification">
                            OK
                        </button>
                    </div>
                </div>
            </div>
        `;
        document.body.appendChild(notification);
        
        // Set up event listeners for the new notification
        document.getElementById('closeRefreshNotification').addEventListener('click', function() {
            notification.classList.remove('show');
        });
        
        document.getElementById('okRefreshNotification').addEventListener('click', function() {
            notification.classList.remove('show');
        });
        
        // Close notification when clicking outside
        notification.addEventListener('click', function(e) {
            if (e.target === notification) {
                notification.classList.remove('show');
            }
        });
    }
    
    // Update notification content based on type
    const iconElement = document.getElementById('refreshNotificationIcon');
    const titleElement = document.getElementById('refreshNotificationTitle');
    const messageElement = document.getElementById('refreshNotificationMessage');
    
    // Set styles based on notification type
    switch(type) {
        case 'success':
            iconElement.innerHTML = '<i class="fas fa-check-circle"></i>';
            iconElement.className = 'notification-icon text-green-500';
            titleElement.textContent = title;
            messageElement.textContent = message;
            break;
        case 'info':
            iconElement.innerHTML = '<i class="fas fa-info-circle"></i>';
            iconElement.className = 'notification-icon text-blue-500';
            titleElement.textContent = title;
            messageElement.textContent = message;
            break;
        case 'error':
            iconElement.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
            iconElement.className = 'notification-icon text-red-500';
            titleElement.textContent = title;
            messageElement.textContent = message;
            break;
        default:
            iconElement.innerHTML = '<i class="fas fa-info-circle"></i>';
            iconElement.className = 'notification-icon text-cyan-400';
            titleElement.textContent = title;
            messageElement.textContent = message;
    }
    
    // Show the notification
    notification.classList.add('show');
}

// View Receipt Function
function viewOrderReceipt(order) {
    // Show the receipt modal
    showReceipt(order);
}

// Toast notification function
function showToast(message, type = 'info') {
    // Remove existing toast if any
    const existingToast = document.getElementById('actionToast');
    if (existingToast) {
        existingToast.remove();
    }
    
    const toast = document.createElement('div');
    toast.id = 'actionToast';
    toast.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-0 ${
        type === 'success' ? 'bg-green-600 text-white' :
        type === 'error' ? 'bg-red-600 text-white' :
        'bg-blue-600 text-white'
    }`;
    toast.innerHTML = `
        <div class="flex items-center">
            <i class="fas ${
                type === 'success' ? 'fa-check-circle' :
                type === 'error' ? 'fa-exclamation-circle' :
                'fa-info-circle'
            } mr-2"></i>
            <span>${message}</span>
        </div>
    `;
    
    document.body.appendChild(toast);
    
    // Auto remove after 3 seconds
    setTimeout(() => {
        toast.style.transform = 'translateX(100%)';
        setTimeout(() => {
            if (toast.parentNode) {
                toast.remove();
            }
        }, 300);
    }, 3000);
}

// Add this CSS for the toast animation
const toastStyles = document.createElement('style');
toastStyles.textContent = `
    #actionToast {
        animation: slideInRight 0.3s ease-out;
    }
    
    @keyframes slideInRight {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
`;
document.head.appendChild(toastStyles);
    // Update recent orders on home page
    function updateRecentOrders() {
        const recentOrdersContainer = document.getElementById('recentOrders');
        recentOrdersContainer.innerHTML = '';
        
        // Get the 3 most recent orders
        const recentOrders = [...appState.orders]
            .sort((a, b) => new Date(b.date) - new Date(a.date))
            .slice(0, 3);
        
        if (recentOrders.length === 0) {
            recentOrdersContainer.innerHTML = `
                <div class="text-center py-4">
                    <p class="text-gray-400 text-sm">You haven't placed any orders yet.</p>
                </div>
            `;
            return;
        }
        
        recentOrders.forEach(order => {
            const orderDate = new Date(order.date);
            const orderItem = document.createElement('div');
            orderItem.className = 'flex justify-between items-center p-3 bg-blue-800 bg-opacity-30 rounded hover-zoom';
            orderItem.innerHTML = `
                <div class="flex-1">
                    <p class="font-semibold text-sm">${order.items.slice(0, 2).map(item => item.name).join(', ')}${order.items.length > 2 ? '...' : ''}</p>
                    <p class="text-xs text-gray-400">Order #${order.id}  ${order.items.length} item(s)</p>
                </div>
                <div class="text-right">
                    <p class="font-bold text-sm">${order.total.toFixed(2)}</p>
                    <span class="order-status status-${order.status} text-xs">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span>
                </div>
            `;
            recentOrdersContainer.appendChild(orderItem);
        });
    }

    // Update dashboard statistics
    function updateDashboardStats() {
        const currentOrders = appState.orders.filter(order => 
            order.status !== 'delivered' && order.status !== 'cancelled'
        ).length;
        
        document.getElementById('currentOrdersCount').textContent = currentOrders;
        document.getElementById('currentOrdersText').textContent = currentOrders;
        document.getElementById('totalOrdersCount').textContent = appState.orders.length;
    }

    // Reorder items from a previous order
    function reorderItems(orderId) {
        const order = appState.orders.find(o => o.id.toString() === orderId.toString());
        if (!order) return;
        
        // Clear current cart
        appState.cart = [];
        
        // Add items from the previous order to cart
        order.items.forEach(item => {
            const menuItem = appState.menuItems.find(mi => mi.id === item.id);
            if (menuItem) {
                appState.cart.push({
                    ...menuItem,
                    quantity: item.quantity
                });
            }
        });
        
        updateCartCount();
        updateCartSection();
        saveCartToStorage(); // NEW: Save the reordered cart
        showSection('cart');
        
        // Show success message
        alert('Items from your previous order have been added to your cart!');
    }

    // Open checkout modal
    function openCheckout() {
        if (appState.cart.length === 0) {
            alert('Your cart is empty.');
            return;
        }
        
        const checkoutSubtotalElement = document.getElementById('checkoutSubtotal');
        const checkoutTotalElement = document.getElementById('checkoutTotal');
        const subtotal = appState.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const total = subtotal + appState.deliveryFee;
        
        checkoutSubtotalElement.textContent = subtotal.toFixed(2);
        checkoutTotalElement.textContent = total.toFixed(2);
        
        checkoutModal.style.display = 'block';
    }

    // Save ALL orders to localStorage (for admin/staff)
    function saveAllOrdersToStorage(newOrder) {
        try {
            // Get existing orders
            const existingOrders = localStorage.getItem('customerOrders');
            let allOrders = [];
            
            if (existingOrders) {
                allOrders = JSON.parse(existingOrders);
            }
            
            // Add new order to all orders
            allOrders.unshift({
                ...newOrder,
                customer: {...newOrder.customer},
                items: newOrder.items.map(item => ({...item}))
            });
            
            // Save back to localStorage
            localStorage.setItem('customerOrders', JSON.stringify(allOrders));
            
            console.log('All orders saved to customerOrders:', allOrders.length);
        } catch (error) {
            console.error('Error saving all orders to localStorage:', error);
        }
    }

    // Generate unique order ID
    function generateOrderId() {
        return Math.floor(10000 + Math.random() * 90000);
    }

    // Close order confirmation
    function closeOrderConfirmation() {
        orderConfirmationModal.style.display = 'none';
        showSection('home');
    }

    // Close all modals
    function closeAllModals() {
        checkoutModal.style.display = 'none';
        orderConfirmationModal.style.display = 'none';
        receiptModal.style.display = 'none';
    }

    // Close modals when clicking outside
    window.addEventListener('click', (e) => {
        if (e.target === checkoutModal) checkoutModal.style.display = 'none';
        if (e.target === orderConfirmationModal) orderConfirmationModal.style.display = 'none';
        if (e.target === receiptModal) receiptModal.style.display = 'none';
    });
    </script>
</body>
</html>